/*!
 * Azure Storage SDK for JavaScript - File, 10.1.0
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).azfile={})}(this,function(h){"use strict";function r(e){return e.toLowerCase()}var m=function(){function e(e){if(this._headersMap={},e)for(var t in e)this.set(t,e[t])}return e.prototype.set=function(e,t){this._headersMap[r(e)]={name:e,value:t.toString()}},e.prototype.get=function(e){var t=this._headersMap[r(e)];return t?t.value:void 0},e.prototype.contains=function(e){return!!this._headersMap[r(e)]},e.prototype.remove=function(e){var t=this.contains(e);return delete this._headersMap[r(e)],t},e.prototype.rawHeaders=function(){var e={};for(var t in this._headersMap){var r=this._headersMap[t];e[r.name.toLowerCase()]=r.value}return e},e.prototype.headersArray=function(){var e=[];for(var t in this._headersMap)e.push(this._headersMap[t]);return e},e.prototype.headerNames=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].name);return e},e.prototype.headerValues=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].value);return e},e.prototype.toJson=function(){return this.rawHeaders()},e.prototype.toString=function(){return JSON.stringify(this.toJson())},e.prototype.clone=function(){return new e(this.rawHeaders())},e}();function s(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function o(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}for(var e,u=(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}(e={exports:{}},e.exports),e.exports),i=[],t=0;t<256;++t)i[t]=(t+256).toString(16).substr(1);var l=function(e,t){var r=t||0,n=i;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")};var n=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||u)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[n+a]=i[a];return t||l(i)},p={msRestVersion:"0.1.0",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}},d="undefined"==typeof navigator&&"undefined"!=typeof process;function N(e){var t={};return t.body=e.bodyAsText,t.headers=e.headers,t.status=e.status,t}function S(e){var t=e.clone();return t.headers&&t.headers.remove("authorization"),t}function y(){return n()}function c(t,r){return new Promise(function(e){return setTimeout(function(){return e(r)},t)})}var f=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function a(e,t,r){return e&&t?e.split(t).join(r||""):e}var g=function(){function e(e,t){void 0===e&&(e={}),this.modelMappers=e,this.isXML=t}return e.prototype.validateConstraints=function(e,r,n){var t=function(e,t){throw new Error('"'+n+'" with value "'+r+'" should satisfy the constraint "'+e+'": '+t+".")};if(e.constraints&&null!=r){var i=e.constraints,a=i.ExclusiveMaximum,o=i.ExclusiveMinimum,s=i.InclusiveMaximum,u=i.InclusiveMinimum,l=i.MaxItems,p=i.MaxLength,m=i.MinItems,d=i.MinLength,c=i.MultipleOf,h=i.Pattern,y=i.UniqueItems;null!=a&&a<=r&&t("ExclusiveMaximum",a),null!=o&&r<=o&&t("ExclusiveMinimum",o),null!=s&&s<r&&t("InclusiveMaximum",s),null!=u&&r<u&&t("InclusiveMinimum",u),null!=l&&r.length>l&&t("MaxItems",l),null!=p&&r.length>p&&t("MaxLength",p),null!=m&&r.length<m&&t("MinItems",m),null!=d&&r.length<d&&t("MinLength",d),null!=c&&r%c!=0&&t("MultipleOf",c),h&&null===r.match(h)&&t("Pattern",h),y&&r.some(function(e,t,r){return r.indexOf(e)!==t})&&t("UniqueItems",y)}},e.prototype.serialize=function(e,t,r){var n={},i=e.type.name;r||(r=e.serializedName),null!==i.match(/^Sequence$/gi)&&(n=[]),null!=t||null==e.defaultValue&&!e.isConstant||(t=e.defaultValue);var a=e.required,o=e.nullable;if(a&&o&&void 0===t)throw new Error(r+" cannot be undefined.");if(a&&!o&&null==t)throw new Error(r+" cannot be null or undefined.");if(!a&&!1===o&&null===t)throw new Error(r+" cannot be null.");if(null==t)n=t;else if(this.validateConstraints(e,t,r),null!==i.match(/^any$/gi))n=t;else if(null!==i.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi))n=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(t+" with value "+r+" must be of type number.")}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(t+' with value "'+r+'" must be of type string.')}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||(i=r,!new RegExp("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$","ig").test(i)))throw new Error(t+' with value "'+r+'" must be of type string and a valid uuid.')}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(t+" with value "+r+" must be of type boolean.")}else if(null!==e.match(/^Stream$/gi)){var n=typeof r;if(!("string"===n||"function"===n||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||"function"==typeof Blob&&r instanceof Blob))throw new Error(t+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}var i;return r}(i,r,t);else if(null!==i.match(/^Enum$/gi)){n=function(e,t,r){if(!t)throw new Error("Please provide a set of allowedValues to validate "+e+" as an Enum Type.");if(t.some(function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r}))return r;throw new Error(r+" is not a valid value for "+e+". The valid values are: "+JSON.stringify(t)+".")}(r,e.type.allowedValues,t)}else null!==i.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?n=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123 format.");t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");t=function(e){if(!e)return;"string"==typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(n=t,!f.test(n))throw new Error(r+' must be a string in ISO 8601 format. Instead was "'+t+'".');t=t}var n;return t}(i,t,r):null!==i.match(/^ByteArray$/gi)?n=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=s(t)}return t}(r,t):null!==i.match(/^Base64Url$/gi)?n=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=function(e){if(!e)return;if(e instanceof Uint8Array)return function(e,t){for(var r=e.length;0<=r-1&&e[r-1]===t;)--r;return e.substr(0,r)}(s(e),"=").replace(/\+/g,"-").replace(/\//g,"_");throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.")}(t)}return t}(r,t):null!==i.match(/^Sequence$/gi)?n=function(e,t,r,n){if(!Array.isArray(r))throw new Error(n+" must be of type Array.");var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n+".");for(var a=[],o=0;o<r.length;o++)a[o]=e.serialize(i,r[o],n);return a}(this,e,t,r):null!==i.match(/^Dictionary$/gi)?n=function(e,t,r,n){if("object"!=typeof r)throw new Error(n+" must be of type object.");var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n+".");for(var a={},o=0,s=Object.keys(r);o<s.length;o++){var u=s[o];a[u]=e.serialize(i,r[u],n+"."+u)}return a}(this,e,t,r):null!==i.match(/^Composite$/gi)&&(n=function(r,e,n,i){var t;U(r,e)&&(e=H(r,e,n,"clientName"));if(null==n)return n;for(var a={},o=A(r,e,i),s=0,u=Object.keys(o);s<u.length;s++){var l=u[s],p=o[l];if(!p.readOnly){var m=void 0,d=a;if(r.isXML)m=p.xmlIsWrapped?p.xmlName:p.xmlElementName||p.xmlName;else{var c=L(p.serializedName);m=c.pop();for(var h=0,y=c;h<y.length;h++){var f=y[h],g=d[f];null==g&&null!=n[l]&&(d[f]={}),d=d[f]}}if(null!=d){var v=""!==p.serializedName?i+"."+p.serializedName:i,N=n[l],S=U(r,e);S&&S.clientName===l&&null==N&&(N=e.serializedName);var P=r.serialize(p,N,v);void 0!==P&&null!=m&&(p.xmlIsAttribute?(d.$=d.$||{},d.$[m]=P):p.xmlIsWrapped?d[m]=((t={})[p.xmlElementName]=P,t):d[m]=P)}}}var x=e.type.additionalProperties;if(x){var R=Object.keys(o),b=function(t){var e=R.every(function(e){return e!==t});e&&(a[t]=r.serialize(x,n[t],i+'["'+t+'"]'))};for(var z in n)b(z)}return a}(this,e,t,r));return n},e.prototype.deserialize=function(e,t,r){if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),t;var n,i,a=e.type.name;return r||(r=e.serializedName),null!==a.match(/^Composite$/gi)?n=function(e,t,r,n){U(e,t)&&(t=H(e,t,r,"serializedName"));for(var i=A(e,t,n),a={},o=[],s=0,u=Object.keys(i);s<u.length;s++){var l=u[s],p=i[l],m=L(i[l].serializedName);o.push(m[0]);var d=p.serializedName,c=p.xmlName,h=p.xmlElementName,y=n;""!==d&&void 0!==d&&(y=n+"."+d);var f=p.headerCollectionPrefix;if(f){for(var g={},v=0,N=Object.keys(r);v<N.length;v++){var S=N[v];S.startsWith(f)&&(g[S.substring(f.length)]=e.deserialize(p.type.value,r[S],y)),o.push(S)}a[l]=g}else if(e.isXML)if(p.xmlIsAttribute&&r.$)a[l]=e.deserialize(p,r.$[c],y);else{var P=h||c||d,x=r[P];if(p.xmlIsWrapped){var R=void 0===(x=(x=r[c])&&x[h]);R&&(x=[])}a[l]=e.deserialize(p,x,y)}else{for(var b=void 0,z=r,T=0,E=m;T<E.length;T++){var w=E[T];if(!z)break;z=z[w]}b=z;var q=t.type.polymorphicDiscriminator;q&&p.serializedName===q.serializedName&&null==b&&(b=t.serializedName);var M=void 0;Array.isArray(r[l])&&""===i[l].serializedName?(b=r[l],a=e.deserialize(p,b,y)):void 0!==b&&(M=e.deserialize(p,b,y),a[l]=M)}}var C=t.type.additionalProperties;if(C){var _=function(e){for(var t in i){var r=L(i[t].serializedName);if(r[0]===e)return!1}return!0};for(var O in r)_(O)&&(a[O]=e.deserialize(C,r[O],n+'["'+O+'"]'))}else for(var D=0,I=Object.keys(r);D<I.length;D++){var l=I[D];void 0!==a[l]||o.includes(l)||["$","_"].includes(l)||(a[l]=r[l])}return a}(this,e,t,r):(this.isXML&&null!=t.$&&null!=t._&&(t=t._),null!==a.match(/^Number$/gi)?(n=parseFloat(t),isNaN(n)&&(n=t)):null!==a.match(/^Boolean$/gi)?n="true"===t||"false"!==t&&t:null!==a.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/gi)?n=t:null!==a.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?n=new Date(t):null!==a.match(/^UnixTime$/gi)?n=(i=t)?new Date(1e3*i):void 0:null!==a.match(/^ByteArray$/gi)?n=o(t):null!==a.match(/^Base64Url$/gi)?n=function(e){if(!e)return;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return o(e=e.replace(/\-/g,"+").replace(/\_/g,"/"))}(t):null!==a.match(/^Sequence$/gi)?n=function(e,t,r,n){var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n);if(r){Array.isArray(r)||(r=[r]);for(var a=[],o=0;o<r.length;o++)a[o]=e.deserialize(i,r[o],n+"["+o+"]");return a}return r}(this,e,t,r):null!==a.match(/^Dictionary$/gi)&&(n=function(e,t,r,n){var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n);if(r){for(var a={},o=0,s=Object.keys(r);o<s.length;o++){var u=s[o];a[u]=e.deserialize(i,r[u],n)}return a}return r}(this,e,t,r))),e.isConstant&&(n=e.defaultValue),n},e}();function L(e){var t=[],r="";if(e)for(var n=0,i=e.split(".");n<i.length;n++){var a=i[n];"\\"===a.charAt(a.length-1)?r+=a.substr(0,a.length-1)+".":(r+=a,t.push(r),r="")}return t}function A(e,t,r){var n=t.type.modelProperties;if(!n){var i=t.type.className;if(!i)throw new Error('Class name for model "'+r+'" is not provided in the mapper "'+JSON.stringify(t,void 0,2)+'".');var a=e.modelMappers[i];if(!a)throw new Error('mapper() cannot be null or undefined for model "'+i+'".');if(!(n=a.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(a)+'" of type "'+i+'" for object "'+r+'".')}return n}function H(e,t,r,n){var i=U(e,t);if(i){var a=i[n];if(null!=a){var o=r[a];if(null!=o){var s=t.type.uberParent||t.type.className,u=o===s?o:s+"."+o,l=e.modelMappers.discriminators[u];l&&(t=l)}}}return t}function U(e,t){return t.type.polymorphicDiscriminator||v(e,t.type.uberParent)||v(e,t.type.className)}function v(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}var q=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i]=i}return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]),M=function(){function t(e,t,r,n,i,a,o,s,u,l,p){this.streamResponseBody=a,this.url=e||"",this.method=t||"GET",this.headers=i instanceof m?i:new m(i),this.body=r,this.query=n,this.formData=void 0,this.withCredentials=o||!1,this.abortSignal=s,this.timeout=u||0,this.onUploadProgress=l,this.onDownloadProgress=p}return t.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},t.prototype.prepare=function(e){if(!e)throw new Error("options object is required");if(null==e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!=e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){var t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){var n=e.pathTemplate,i=e.pathParameters;if("string"!=typeof n)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");var r=e.baseUrl,a=r+(r.endsWith("/")?"":"/")+(n.startsWith("/")?n.slice(1):n),o=a.match(/({\w*\s*\w*})/gi);if(o&&o.length){if(!i)throw new Error("pathTemplate: "+n+" has been provided. Hence, options.pathParameters must also be provided.");o.forEach(function(e){var t=e.slice(1,-1),r=i[t];if(null==r||"string"!=typeof r&&"object"!=typeof r)throw new Error("pathTemplate: "+n+" contains the path parameter "+t+" however, it is not present in "+i+" - "+JSON.stringify(i,void 0,2)+'.The value of the path parameter can either be a "string" of the form { '+t+': "some sample value" } or it can be an "object" of the form { "'+t+'": { value: "some sample value", skipUrlEncoding: true } }.');if("string"==typeof r.valueOf()&&(a=a.replace(e,encodeURIComponent(r))),"object"==typeof r.valueOf()){if(!r.value)throw new Error("options.pathParameters["+t+'] is of type "object" but it does not contain a "value" property.');a=r.skipUrlEncoding?a.replace(e,r.value):a.replace(e,encodeURIComponent(r.value))}})}this.url=a}if(e.queryParameters){var s=e.queryParameters;if("object"!=typeof s)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var u=[];for(var l in this.query={},s){var p=s[l];if(p)if("string"==typeof p)u.push(l+"="+encodeURIComponent(p)),this.query[l]=encodeURIComponent(p);else if("object"==typeof p){if(!p.value)throw new Error("options.queryParameters["+l+'] is of type "object" but it does not contain a "value" property.');p.skipUrlEncoding?(u.push(l+"="+p.value),this.query[l]=p.value):(u.push(l+"="+encodeURIComponent(p.value)),this.query[l]=encodeURIComponent(p.value))}}this.url+=u.join("&")}if(e.headers)for(var m=e.headers,d=0,c=Object.keys(e.headers);d<c.length;d++){var h=c[d];this.headers.set(h,m[h])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",y()),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,null!=e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new g(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this},t.prototype.clone=function(){var e=new t(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e},t}(),P=function(e,t){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function x(e,t){function r(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var C=function(){return(C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function R(a,o,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function n(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}i((u=u.apply(a,o||[])).next())})}function b(r,n){var i,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],a=0}finally{i=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var z,T=function(s){function u(e,t,r,n,i,a){var o=s.call(this,e)||this;return o.code=t,o.statusCode=r,o.request=n,o.response=i,o.body=a,Object.setPrototypeOf(o,u.prototype),o}return x(u,s),u.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",u.REQUEST_ABORTED_ERROR="REQUEST_ABORTED_ERROR",u.PARSE_ERROR="PARSE_ERROR",u}(Error),E=function(){function e(){}return e.prototype.sendRequest=function(r){var n=new XMLHttpRequest,e=r.abortSignal;if(e){var t=function(){n.abort()};e.addEventListener("abort",t),n.addEventListener("readystatechange",function(){n.readyState===XMLHttpRequest.DONE&&e.removeEventListener("abort",t)})}if(w(n.upload,r.onUploadProgress),w(n,r.onDownloadProgress),r.formData){for(var i=r.formData,a=new FormData,o=function(e,t){t&&t.hasOwnProperty("value")&&t.hasOwnProperty("options")?a.append(e,t.value,t.options):a.append(e,t)},s=0,u=Object.keys(i);s<u.length;s++){var l=u[s],p=i[l];if(Array.isArray(p))for(var m=0;m<p.length;m++)o(l,p[m]);else o(l,p)}r.body=a,r.formData=void 0;var d=r.headers.get("Content-Type");d&&-1!==d.indexOf("multipart/form-data")&&r.headers.remove("Content-Type")}n.open(r.method,r.url),n.timeout=r.timeout,n.withCredentials=r.withCredentials;for(var c=0,h=r.headers.headersArray();c<h.length;c++){var y=h[c];n.setRequestHeader(y.name,y.value)}return n.responseType=r.streamResponseBody?"blob":"text",n.send(void 0===r.body?null:r.body),r.streamResponseBody?new Promise(function(t,e){n.addEventListener("readystatechange",function(){if(n.readyState===XMLHttpRequest.HEADERS_RECEIVED){var e=new Promise(function(e,t){n.addEventListener("load",function(){e(n.response)}),O(r,n,t)});t({request:r,status:n.status,headers:_(n),blobBody:e})}}),O(r,n,e)}):new Promise(function(e,t){n.addEventListener("load",function(){return e({request:r,status:n.status,headers:_(n),bodyAsText:n.responseText})}),O(r,n,t)})},e}();function w(e,t){t&&e.addEventListener("progress",function(e){return t({loadedBytes:e.loaded})})}function _(e){for(var t=new m,r=0,n=e.getAllResponseHeaders().trim().split(/[\r\n]+/);r<n.length;r++){var i=n[r],a=i.indexOf(":"),o=i.slice(0,a),s=i.slice(a+2);t.set(o,s)}return t}function O(e,t,r){t.addEventListener("error",function(){return r(new T("Failed to send request to "+e.url,T.REQUEST_SEND_ERROR,void 0,e))}),t.addEventListener("abort",function(){return r(new T("The request was aborted",T.REQUEST_ABORTED_ERROR,void 0,e))}),t.addEventListener("timeout",function(){return r(new T("timeout of "+t.timeout+"ms exceeded",T.REQUEST_SEND_ERROR,void 0,e))})}function D(e){return I(e.parameterPath,e.mapper)}function I(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}function F(e){var t=!1;for(var r in e.responses){var n=e.responses[r];if(n.bodyMapper&&n.bodyMapper.type.name===q.Stream){t=!0;break}}return t}(z=h.HttpPipelineLogLevel||(h.HttpPipelineLogLevel={}))[z.OFF=0]="OFF",z[z.ERROR=1]="ERROR",z[z.WARNING=2]="WARNING",z[z.INFO=3]="INFO";var j=new DOMParser;function k(e){try{var t=j.parseFromString(e,"application/xml");!function(e){if(B){var t=e.getElementsByTagNameNS(B,"parsererror");if(t.length)throw new Error(t.item(0).innerHTML)}}(t);var r=function e(t){var r={};var n=t.childNodes.length;var i=t.childNodes[0];var a=i&&1===n&&i.nodeType===Node.TEXT_NODE&&i.nodeValue||void 0;var o=(u=t,s=u,s.attributes&&u.hasAttributes()?u:void 0);var s;var u;if(o){r.$={};for(var l=0;l<o.attributes.length;l++){var p=o.attributes[l];r.$[p.nodeName]=p.nodeValue}a&&(r._=a)}else 0===n?r="":a&&(r=a);if(!a)for(var l=0;l<n;l++){var m=t.childNodes[l];if(m.nodeType!==Node.TEXT_NODE){var d=e(m);r[m.nodeName]?Array.isArray(r[m.nodeName])?r[m.nodeName].push(d):r[m.nodeName]=[r[m.nodeName],d]:r[m.nodeName]=d}}return r}(t.childNodes[0]);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}var B="";try{B=j.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){}var V=document.implementation.createDocument(null,null,null),G=new XMLSerializer;function X(e,t){var r=function e(t,r){{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t){var n=V.createElement(r);return n.textContent=t.toString(),[n]}if(Array.isArray(t)){for(var i=[],a=0,o=t;a<o.length;a++)for(var s=o[a],u=0,l=e(s,r);u<l.length;u++){var p=l[u];i.push(p)}return i}if("object"!=typeof t)throw new Error("Illegal value passed to buildObject: "+t);for(var n=V.createElement(r),m=0,d=Object.keys(t);m<d.length;m++){var c=d[m];if("$"===c)for(var h=0,y=Q(t[c]);h<y.length;h++){var f=y[h];n.attributes.setNamedItem(f)}else for(var g=0,v=e(t[c],c);g<v.length;g++){var p=v[g];n.appendChild(p)}}return[n]}}(e,t&&t.rootName||"root")[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+G.serializeToString(r)}function Q(e){for(var t=[],r=0,n=Object.keys(e);r<n.length;r++){var i=n[r],a=V.createAttribute(i);a.value=e[i].toString(),t.push(a)}return t}var $=function(){function e(e,t){this._nextPolicy=e,this._options=t}return e.prototype.shouldLog=function(e){return this._options.shouldLog(e)},e.prototype.log=function(e,t){this._options.log(e,t)},e}(),W=function(){function e(e){this._logger=e}return e.prototype.shouldLog=function(e){return!!this._logger&&e!==h.HttpPipelineLogLevel.OFF&&e<=this._logger.minimumLogLevel},e.prototype.log=function(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)},e}();function Y(r){return{create:function(e,t){return new Z(e,r,t)}}}var J=["application/json","text/json"],K=["application/xml","application/atom+xml"],Z=function(i){function e(e,t,r){var n=i.call(this,e,r)||this;return n.jsonContentTypes=t&&t.json||J,n.xmlContentTypes=t&&t.xml||K,n}return x(e,i),e.prototype.sendRequest=function(t){return R(this,void 0,void 0,function(){var n=this;return b(this,function(e){return[2,this._nextPolicy.sendRequest(t).then(function(e){return t=n.jsonContentTypes,r=n.xmlContentTypes,function(t,r,i){var e=function(e){var t='Error "'+e+'" occurred while parsing the response body - '+i.bodyAsText+".",r=e.code||T.PARSE_ERROR,n=new T(t,r,i.status,i.request,i,i.bodyAsText);return Promise.reject(n)};if(!i.request.streamResponseBody&&i.bodyAsText){var n=i.bodyAsText,a=i.headers.get("Content-Type")||"",o=a?a.split(";").map(function(e){return e.toLowerCase()}):[];if(0===o.length||o.some(function(e){return-1!==t.indexOf(e)}))return new Promise(function(e){i.parsedBody=JSON.parse(n),e(i)}).catch(e);if(o.some(function(e){return-1!==r.indexOf(e)}))return k(n).then(function(e){return i.parsedBody=e,i}).catch(e)}return Promise.resolve(i)}(t,r,v=e).then(function(t){var e,r,n=void 0===(r=(e=t).request.shouldDeserialize)||("boolean"==typeof r?r:r(e));if(n){var i=t.request.operationSpec;if(i&&i.responses){var a=t.status,o=Object.keys(i.responses),s=0===o.length||1===o.length&&"default"===o[0],u=function(e){var t,r=e.request,n=r.operationSpec;if(n){var i=r.operationResponseGetter;t=i?i(n,e):n.responses[e.status]}return t}(t),l=s?200<=a&&a<300:!!u;if(l){if(u){if(u.bodyMapper){var p=t.parsedBody;i.isXML&&u.bodyMapper.type.name===q.Sequence&&(p="object"==typeof p?p[u.bodyMapper.xmlElementName]:[]);try{t.parsedBody=i.serializer.deserialize(u.bodyMapper,p,"operationRes.parsedBody")}catch(h){var m=new T("Error "+h+" occurred in deserializing the responseBody - "+t.bodyAsText);return m.request=S(t.request),m.response=N(t),Promise.reject(m)}}else"HEAD"===i.httpMethod&&(t.parsedBody=200<=v.status&&v.status<300);u.headersMapper&&(t.parsedHeaders=i.serializer.deserialize(u.headersMapper,t.headers.rawHeaders(),"operationRes.parsedHeaders"))}}else{var d=i.responses.default;if(d){var c=F(i)?"Unexpected status code: "+a:t.bodyAsText,h=new T(c);h.statusCode=a,h.request=S(t.request),h.response=N(t);var y=t.parsedBody;try{if(y){var f=d.bodyMapper;if(f&&"CloudError"===f.serializedName)y.error&&(y=y.error),y.code&&(h.code=y.code),y.message&&(h.message=y.message);else{var g=y;y.error&&(g=y.error),h.code=g.code,g.message&&(h.message=g.message)}if(f){var p=y;i.isXML&&f.type.name===q.Sequence&&(p="object"==typeof y?y[f.xmlElementName]:[]),h.body=i.serializer.deserialize(f,p,"error.body")}}}catch(e){h.message='Error "'+e.message+'" occurred in deserializing the responseBody - "'+t.bodyAsText+'" for the default response.'}return Promise.reject(h)}}}}return Promise.resolve(t)});var t,r,v})]})})},e}($);var ee=function(u){function e(e,t,r,n,i,a){var o=u.call(this,e,t)||this;function s(e){return"number"==typeof e}return o.retryCount=s(r)?r:3,o.retryInterval=s(n)?n:3e4,o.minRetryInterval=s(i)?i:3e3,o.maxRetryInterval=s(a)?a:9e4,o}return x(e,u),e.prototype.sendRequest=function(t){var r=this;return this._nextPolicy.sendRequest(t.clone()).then(function(e){return te(r,t,e)}).catch(function(e){return te(r,t,e.response,void 0,e)})},e}($);function te(t,r,n,i,e){i=function(e,t,r){t||(t={retryCount:0,retryInterval:0}),r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(t,i,e);var a=r.abortSignal&&r.abortSignal.aborted;if(!a&&function(e,t,r){if(null==t||t<500&&408!==t||501===t||505===t)return!1;if(!r)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(r&&r.retryCount)<e.retryCount}(t,n&&n.status,i))return c(i.retryInterval).then(function(){return t._nextPolicy.sendRequest(r.clone())}).then(function(e){return te(t,r,e,i,void 0)}).catch(function(e){return te(t,r,n,i,e)});if(a||e||!n){var o=i.error||new T("Failed to send the request.",T.REQUEST_SEND_ERROR,n&&n.status,n&&n.request,n);return Promise.reject(o)}return Promise.resolve(n)}var re=function(i){function e(e,t,r){var n=i.call(this,e,t)||this;return n._requestIdHeaderName=r,n}return x(e,i),e.prototype.sendRequest=function(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,y()),this._nextPolicy.sendRequest(e)},e}($);function ne(){var e,t,r,n,i=[{key:"ms-rest-js",value:p.msRestVersion}],a=[{key:"OS",value:((e=window.navigator).oscpu||e.platform).replace(" ","")}];return t=i.concat(a),void 0===r&&(r=" "),void 0===n&&(n="/"),t.map(function(e){var t=e.value?""+n+e.value:"";return""+e.key+t}).join(r)}var ie=function(a){function e(e,t,r,n){var i=a.call(this,e,t)||this;return i._nextPolicy=e,i._options=t,i.headerKey=r,i.headerValue=n,i}return x(e,a),e.prototype.sendRequest=function(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)},e.prototype.addUserAgentHeader=function(e){e.headers||(e.headers=new m),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)},e}($),ae=function(){function s(){this._rawQuery={}}return s.prototype.any=function(){return 0<Object.keys(this._rawQuery).length},s.prototype.set=function(e,t){if(e)if(null!=t){var r=Array.isArray(t)?t:t.toString();this._rawQuery[e]=r}else delete this._rawQuery[e]},s.prototype.get=function(e){return e?this._rawQuery[e]:void 0},s.prototype.toString=function(){var e="";for(var t in this._rawQuery){e&&(e+="&");var r=this._rawQuery[t];if(Array.isArray(r)){for(var n=[],i=0,a=r;i<a.length;i++){var o=a[i];n.push(t+"="+o)}e+=n.join("&")}else e+=t+"="+r}return e},s.parse=function(e){var t=new s;if(e){e.startsWith("?")&&(e=e.substring(1));for(var r="ParameterName",n="",i="",a=0;a<e.length;++a){var o=e[a];switch(r){case"ParameterName":switch(o){case"=":r="ParameterValue";break;case"&":i=n="";break;default:n+=o}break;case"ParameterValue":switch(o){case"=":i=n="",r="Invalid";break;case"&":t.set(n,i),i=n="",r="ParameterName";break;default:i+=o}break;case"Invalid":"&"===o&&(r="ParameterName");break;default:throw new Error("Unrecognized URLQuery parse state: "+r)}}"ParameterValue"===r&&t.set(n,i)}return t},s}(),oe=function(){function r(){}return r.prototype.setScheme=function(e){e?this.set(e,"SCHEME"):this._scheme=void 0},r.prototype.getScheme=function(){return this._scheme},r.prototype.setHost=function(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0},r.prototype.getHost=function(){return this._host},r.prototype.setPort=function(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")},r.prototype.getPort=function(){return this._port},r.prototype.setPath=function(e){e?-1!==e.indexOf("://")?this.set(e,"SCHEME"):this.set(e,"PATH"):this._path=void 0},r.prototype.appendPath=function(e){if(e){var t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}},r.prototype.getPath=function(){return this._path},r.prototype.setQuery=function(e){this._query=e?ae.parse(e):void 0},r.prototype.setQueryParameter=function(e,t){e&&(this._query||(this._query=new ae),this._query.set(e,t))},r.prototype.getQueryParameterValue=function(e){return this._query?this._query.get(e):void 0},r.prototype.getQuery=function(){return this._query?this._query.toString():void 0},r.prototype.set=function(e,t){for(var r=new ue(e,t);r.next();){var n=r.current();if(n)switch(n.type){case"SCHEME":this._scheme=n.text||void 0;break;case"HOST":this._host=n.text||void 0;break;case"PORT":this._port=n.text||void 0;break;case"PATH":var i=n.text||void 0;this._path&&"/"!==this._path&&"/"===i||(this._path=i);break;case"QUERY":this._query=ae.parse(n.text);break;default:throw new Error("Unrecognized URLTokenType: "+n.type)}}},r.prototype.toString=function(){var e="";return this._scheme&&(e+=this._scheme+"://"),this._host&&(e+=this._host),this._port&&(e+=":"+this._port),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+="?"+this._query.toString()),e},r.prototype.replaceAll=function(e,t){e&&(this.setScheme(a(this.getScheme(),e,t)),this.setHost(a(this.getHost(),e,t)),this.setPort(a(this.getPort(),e,t)),this.setPath(a(this.getPath(),e,t)),this.setQuery(a(this.getQuery(),e,t)))},r.parse=function(e){var t=new r;return t.set(e,"SCHEME_OR_HOST"),t},r}(),se=function(){function t(e,t){this.text=e,this.type=t}return t.scheme=function(e){return new t(e,"SCHEME")},t.host=function(e){return new t(e,"HOST")},t.port=function(e){return new t(e,"PORT")},t.path=function(e){return new t(e,"PATH")},t.query=function(e){return new t(e,"QUERY")},t}();var ue=function(){function e(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}return e.prototype.current=function(){return this._currentToken},e.prototype.next=function(){if(le(this))switch(this._currentState){case"SCHEME":a=ce(i=this,function(e){return 48<=(t=e.charCodeAt(0))&&t<=57||65<=t&&t<=90||97<=t&&t<=122;var t}),i._currentToken=se.scheme(a),le(i)?i._currentState="HOST":i._currentState="DONE";break;case"SCHEME_OR_HOST":n=he(r=this,":","/","?"),le(r)?":"===pe(r)?"://"===de(r,3)?(r._currentToken=se.scheme(n),r._currentState="HOST"):(r._currentToken=se.host(n),r._currentState="PORT"):(r._currentToken=se.host(n),"/"===pe(r)?r._currentState="PATH":r._currentState="QUERY"):(r._currentToken=se.host(n),r._currentState="DONE");break;case"HOST":!function(e){"://"===de(e,3)&&me(e,3);var t=he(e,":","/","?");e._currentToken=se.host(t),le(e)?":"===pe(e)?e._currentState="PORT":"/"===pe(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===pe(e)&&me(e);var t=he(e,"/","?");e._currentToken=se.port(t),le(e)?"/"===pe(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":t=he(e=this,"?"),e._currentToken=se.path(t),le(e)?e._currentState="QUERY":e._currentState="DONE";break;case"QUERY":!function(e){"?"===pe(e)&&me(e);var t=function(e){var t="";e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength);return t}(e);e._currentToken=se.query(t),e._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;var e,t,r,n,i,a;return!!this._currentToken},e}();function le(e){return e._currentIndex<e._textLength}function pe(e){return e._text[e._currentIndex]}function me(e,t){le(e)&&(t||(t=1),e._currentIndex+=t)}function de(e,t){var r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function ce(e,t){for(var r="";le(e);){var n=pe(e);if(!t(n))break;r+=n,me(e)}return r}function he(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return ce(e,function(e){return-1===t.indexOf(e)})}var ye=function(i){function e(e,t,r){void 0===r&&(r=20);var n=i.call(this,e,t)||this;return n.maxRetries=r,n}return x(e,i),e.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function t(r,e,n){var i=e.request,a=e.status;var o=e.headers.get("location");if(o&&(300===a||307===a||303===a&&"POST"===i.method)&&(!r.maxRetries||n<r.maxRetries)){var s=oe.parse(i.url);return s.setPath(o),i.url=s.toString(),303===a&&(i.method="GET"),r._nextPolicy.sendRequest(i).then(function(e){return t(r,e,n+1)})}return Promise.resolve(e)}(t,e,0)})},e}($);var fe=function(i){function e(e,t,r){void 0===r&&(r=30);var n=i.call(this,e,t)||this;return n._retryTimeout=r,n}return x(e,i),e.prototype.sendRequest=function(t){var r=this;return this._nextPolicy.sendRequest(t.clone()).then(function(e){return function(t,r,n){if(409===n.status){var e=function(e){var t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){var n=r.error.message.match(/.*'(.*)'/i);n&&(t=n.pop())}}return t}(n.bodyAsText);if(e){var i=function(e){var t,r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);{if(!r||!r[0])throw new Error("Unable to extract subscriptionId from the given url - "+e+".");t=r[0]}return t}(r.url);return(a=t,o=i,s=e,u=r,l=o+"providers/"+s+"/register?api-version=2016-02-01",p=o+"providers/"+s+"?api-version=2016-02-01",m=ge(u),m.method="POST",m.url=l,a._nextPolicy.sendRequest(m).then(function(e){if(200!==e.status)throw new Error("Autoregistration of "+s+" failed. Please try registering manually.");return function r(n,i,a){var e=ge(a);return e.url=i,e.method="GET",n._nextPolicy.sendRequest(e).then(function(e){var t=e.parsedBody;return!(!e.parsedBody||!t.registrationState||"Registered"!==t.registrationState)||c(1e3*n._retryTimeout).then(function(){return r(n,i,a)})})}(a,p,u)})).catch(function(){return!1}).then(function(e){return e?(r.headers.set("x-ms-client-request-id",y()),t._nextPolicy.sendRequest(r.clone())):n})}}var a,o,s,u,l,p,m;return Promise.resolve(n)}(r,t,e)})},e}($);function ge(e,t){void 0===t&&(t=!1);var r={headers:{}};for(var n in t&&(r.url=e.url),e.headers)r.headers.set(n,e.headers.get(n));return r.headers["x-ms-client-request-id"]=y(),r.headers["Content-Type"]="application/json; charset=utf-8",r}var ve=function(i){function e(e,t,r){var n=i.call(this,e,t)||this;return n.authenticationProvider=r,n}return x(e,i),e.prototype.signRequest=function(e){return this.authenticationProvider.signRequest(e)},e.prototype.sendRequest=function(e){var t=this;return this.signRequest(e).then(function(e){return t._nextPolicy.sendRequest(e)})},e}($);var Ne,Se,Pe=function(s){function e(e,t,r,n,i,a){var o=s.call(this,e,t)||this;return o.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,o.DEFAULT_CLIENT_RETRY_COUNT=3,o.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,o.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,o.retryCount="number"==typeof r?r:o.DEFAULT_CLIENT_RETRY_COUNT,o.retryInterval="number"==typeof n?n:o.DEFAULT_CLIENT_RETRY_INTERVAL,o.minRetryInterval="number"==typeof i?i:o.DEFAULT_CLIENT_MIN_RETRY_INTERVAL,o.maxRetryInterval="number"==typeof a?a:o.DEFAULT_CLIENT_MAX_RETRY_INTERVAL,o}return x(e,s),e.prototype.sendRequest=function(t){var r=this;return this._nextPolicy.sendRequest(t.clone()).then(function(e){return function t(r,n,i,a,o){a=Re(r,a,o);return o&&o.code&&xe(r,a)&&("ETIMEDOUT"===o.code||"ESOCKETTIMEDOUT"===o.code||"ECONNREFUSED"===o.code||"ECONNRESET"===o.code||"ENOENT"===o.code)?c(a.retryInterval).then(function(){return r._nextPolicy.sendRequest(n.clone())}).then(function(e){return t(r,n,e,a,o)}).catch(function(e){return t(r,n,i,a,e)}):null!=o?(o=a.error,Promise.reject(o)):Promise.resolve(i)}(r,t,e)})},e}($);function xe(e,t){if(!t)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");return(t&&t.retryCount)<e.retryCount}function Re(e,t,r){t||(t={retryCount:0,retryInterval:0}),r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(Se=Ne||(Ne={})).Csv=",",Se.Ssv=" ",Se.Tsv="\t",Se.Pipes="|",Se.Multi="Multi";var be=p.HttpConstants.StatusCodes;var ze=function(i){function o(e,t,r){var n=i.call(this,e,t)||this;return n._handleResponse=r||n._defaultResponseHandler,n}return x(o,i),o.prototype.sendRequest=function(r){return R(this,void 0,void 0,function(){var t=this;return b(this,function(e){return[2,this._nextPolicy.sendRequest(r.clone()).then(function(e){return e.status!==be.TooManyRequests?e:t._handleResponse(r,e)})]})})},o.prototype._defaultResponseHandler=function(i,a){return R(this,void 0,void 0,function(){var t,r,n=this;return b(this,function(e){return(t=a.headers.get(p.HeaderConstants.RETRY_AFTER))&&(r=o.parseRetryAfterHeader(t))?[2,delay(r).then(function(e){return n._nextPolicy.sendRequest(i)})]:[2,a]})})},o.parseRetryAfterHeader=function(e){var t=Number(e);return Number.isNaN(t)?o.parseDateRetryAfterHeader(e):1e3*t},o.parseDateRetryAfterHeader=function(e){try{var t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}},o}($),Te=function(){function e(e,t){if(t||(t={}),e&&!e.signRequest)throw new Error("credentials argument needs to implement signRequest method");this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||new E,this._requestPolicyOptions=new W(t.httpPipelineLogger),this._requestPolicyFactories=t.requestPolicyFactories||function(e,t){var r=[];t.generateClientRequestIdHeader&&r.push((void 0===(n=t.clientRequestIdHeaderName)&&(n="x-ms-client-request-id"),{create:function(e,t){return new re(e,t,n)}}));var n;e&&("function"==typeof e.create?r.push(e):r.push((i=e,{create:function(e,t){return new ve(e,t,i)}})));var i;r.push((y={value:t.userAgent},f=y&&null!=y.key?y.key:"x-ms-command-name",g=y&&null!=y.value?y.value:ne(),{create:function(e,t){return new ie(e,t,f,g)}})),r.push((void 0===h&&(h=20),{create:function(e,t){return new ye(e,t,h)}})),r.push((c=t.rpRegistrationRetryTimeout,void 0===c&&(c=30),{create:function(e,t){return new fe(e,t,c)}})),t.noRetryPolicy||(r.push({create:function(e,t){return new ee(e,t,l,p,m,d)}}),r.push({create:function(e,t){return new Pe(e,t,a,o,s,u)}}),r.push({create:function(e,t){return new ze(e,t)}}));var a,o,s,u;var l,p,m,d;var c;var h;var y,f,g;return r.push(Y(t.deserializationContentTypes)),r}(e,t)}return e.prototype.sendRequest=function(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");var t;try{t=e instanceof M?(e.validateRequestProperties(),e):(t=new M).prepare(e)}catch(e){return Promise.reject(e)}var r=this._httpClient;if(this._requestPolicyFactories&&0<this._requestPolicyFactories.length)for(var n=this._requestPolicyFactories.length-1;0<=n;--n)r=this._requestPolicyFactories[n].create(r,this._requestPolicyOptions);return r.sendRequest(t)},e.prototype.sendOperationRequest=function(e,t,r){"function"==typeof e.options&&(r=e.options,e.options=void 0);var n,i=new M;try{var a=t.baseUrl||this.baseUri;if(!a)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");i.method=t.httpMethod,i.operationSpec=t;var o=oe.parse(a);if(t.path&&o.appendPath(t.path),t.urlParameters&&0<t.urlParameters.length)for(var s=0,u=t.urlParameters;s<u.length;s++){var l=u[s],p=Ee(this,e,l,t.serializer);p=t.serializer.serialize(l.mapper,p,D(l)),l.skipEncoding||(p=encodeURIComponent(p)),o.replaceAll("{"+(l.mapper.serializedName||D(l))+"}",p)}if(t.queryParameters&&0<t.queryParameters.length)for(var m=0,d=t.queryParameters;m<d.length;m++){var c=d[m],h=Ee(this,e,c,t.serializer);if(null!=h){if(h=t.serializer.serialize(c.mapper,h,D(c)),null!=c.collectionFormat)if(c.collectionFormat===Ne.Multi)if(0===h.length)h="";else for(var y in h){var f=h[y];h[y]=null==f?"":f.toString()}else h=h.join(c.collectionFormat);if(!c.skipEncoding)if(Array.isArray(h))for(var y in h)h[y]=encodeURIComponent(h[y]);else h=encodeURIComponent(h);o.setQueryParameter(c.mapper.serializedName||D(c),h)}}i.url=o.toString();var g=t.contentType||this.requestContentType;if(g&&i.headers.set("Content-Type",g),t.headerParameters)for(var v=0,N=t.headerParameters;v<N.length;v++){var S=N[v],P=Ee(this,e,S,t.serializer);if(null!=P){P=t.serializer.serialize(S.mapper,P,D(S));var x=S.mapper.headerCollectionPrefix;if(x)for(var R=0,b=Object.keys(P);R<b.length;R++){var z=b[R];i.headers.set(x+z,P[z])}else i.headers.set(S.mapper.serializedName||D(S),P)}}var T=e.options;if(T){if(T.customHeaders)for(var E in T.customHeaders)i.headers.set(E,T.customHeaders[E]);T.abortSignal&&(i.abortSignal=T.abortSignal),T.timeout&&(i.timeout=T.timeout),T.onUploadProgress&&(i.onUploadProgress=T.onUploadProgress),T.onDownloadProgress&&(i.onDownloadProgress=T.onDownloadProgress)}i.withCredentials=this._withCredentials,function(e,t,r,n){if(n.requestBody&&n.requestBody.mapper){t.body=Ee(e,r,n.requestBody,n.serializer);var i=n.requestBody.mapper,a=i.required,o=i.xmlName,s=i.xmlElementName,u=i.serializedName,l=i.type.name;try{if(null!=t.body||a){var p=D(n.requestBody);t.body=n.serializer.serialize(i,t.body,p);var m=l===q.Stream;n.isXML?l===q.Sequence?t.body=X((g=t.body,v=s||o||u,Array.isArray(g)||(g=[g]),(N={})[v]=g,N),{rootName:o||u}):m||(t.body=X(t.body,{rootName:o||u})):m||(t.body=JSON.stringify(t.body))}}catch(e){throw new Error('Error "'+e.message+'" occurred in serializing the payload - '+JSON.stringify(u,void 0,"  ")+".")}}else if(n.formDataParameters&&0<n.formDataParameters.length){t.formData={};for(var d=0,c=n.formDataParameters;d<c.length;d++){var h=c[d],y=Ee(e,r,h,n.serializer);if(null!=y){var f=h.mapper.serializedName||D(h);t.formData[f]=n.serializer.serialize(h.mapper,y,D(h))}}}var g,v,N}(this,i,e,t),null==i.streamResponseBody&&(i.streamResponseBody=F(t)),n=this.sendRequest(i).then(function(e){return function(t,e){var r=t.parsedHeaders,n=e&&e.bodyMapper,i=function(e){return Object.defineProperty(e,"_response",{value:t})};if(n){var a=n.type.name;if("Stream"===a)return i(C({},r,{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody}));var o="Composite"===a&&n.type.modelProperties||{},s=Object.keys(o).some(function(e){return""===o[e].serializedName});if("Sequence"===a||s){for(var u=(t.parsedBody||[]).slice(),l=0,p=Object.keys(o);l<p.length;l++){var m=p[l];o[m].serializedName&&(u[m]=t.parsedBody[m])}if(r)for(var d=0,c=Object.keys(r);d<c.length;d++){var m=c[d];u[m]=r[m]}return i(u),u}if("Composite"===a||"Dictionary"===a)return i(C({},r,t.parsedBody))}if(n||"HEAD"===t.request.method)return i(C({},r,{body:t.parsedBody}));return i(C({},r,t.parsedBody))}(e,t.responses[e.status])})}catch(e){n=Promise.reject(e)}var w=r;return w&&n.then(function(e){return w(null,e._response.parsedBody,e._response.request,e._response)}).catch(function(e){return w(e)}),n},e}();function Ee(e,t,r,n){return function e(t,r,n,i,a){var o;"string"==typeof n&&(n=[n]);if(Array.isArray(n)){if(0<n.length){if(i.isConstant)o=i.defaultValue;else{var s=we(r,n);s.propertyFound||(s=we(t,n));var u=!1;s.propertyFound||(u=i.required||"options"===n[0]&&2===n.length),o=u?i.defaultValue:s.propertyValue}var l=I(n,i);a.serialize(i,o,l)}}else for(var p in n){var m=i.type.modelProperties[p],d=n[p],c=e(t,r,d,m,a),h=I(d,m);a.serialize(m,c,h),void 0!==c&&(o||(o={}),o[p]=c)}return o}(e,t,r.parameterPath,r.mapper,n)}function we(e,t){for(var r={propertyFound:!1},n=0;n<t.length;++n){var i=t[n];if(!(null!=e&&i in e))break;e=e[i]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}!function(i){function e(e,t,r){void 0===r&&(r=console.log);var n=i.call(this,e,t)||this;return n.logger=r,n}x(e,i),e.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function(e,t){e.logger(">> Request: "+JSON.stringify(t.request,void 0,2)),e.logger(">> Response status code: "+t.status);var r=t.bodyAsText;return e.logger(">> Body: "+r),Promise.resolve(t)}(t,e)})}}($);!function(r){function e(e){if(!e||e&&"string"!=typeof e)throw new Error("topicKey cannot be null or undefined and must be of type string.");var t={inHeader:{"aeg-sas-key":e}};return r.call(this,t)||this}x(e,r)}(function(){function e(e){if(!e||e&&!e.inHeader&&!e.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=e.inHeader,this.inQuery=e.inQuery}return e.prototype.signRequest=function(e){if(!e)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader)for(var t in e.headers||(e.headers=new m),this.inHeader)e.headers.set(t,this.inHeader[t]);if(this.inQuery){if(!e.url)return Promise.reject(new Error("url cannot be null in the request object."));for(var r in e.url.indexOf("?")<0&&(e.url+="?"),this.inQuery)e.url.endsWith("?")||(e.url+="&"),e.url+=r+"="+this.inQuery[r]}return Promise.resolve(e)},e}());var qe=Object.freeze({}),Me=function(){function n(e,t,r,n){void 0===t&&(t=0);var i=this;this._aborted=!1,this.children=[],this.abortEventListeners=[],this.parent=e,this.key=r,this.value=n,0<t&&(this.timer=setTimeout(function(){i.abort.call(i)},t),this.timer&&d&&this.timer.unref())}return Object.defineProperty(n.prototype,"aborted",{get:function(){return this._aborted},enumerable:!0,configurable:!0}),Object.defineProperty(n,"none",{get:function(){return new n(void 0,0)},enumerable:!0,configurable:!0}),n.timeout=function(e){return new n(void 0,e)},n.prototype.withTimeout=function(e){var t=new n(this,e);return this.children.push(t),t},n.prototype.withValue=function(e,t){var r=new n(this,0,e,t);return this.children.push(r),r},n.prototype.getValue=function(e){for(var t=this;t;t=t.parent)if(t.key===e)return t.value},n.prototype.abort=function(){var t=this;this.aborted||(this.cancelTimer(),this.onabort&&this.onabort.call(this),this.abortEventListeners.forEach(function(e){e.call(t)}),this.children.forEach(function(e){return e.cancelByParent()}),this._aborted=!0)},n.prototype.addEventListener=function(e,t){this.abortEventListeners.push(t)},n.prototype.removeEventListener=function(e,t){var r=this.abortEventListeners.indexOf(t);-1<r&&this.abortEventListeners.splice(r,1)},n.prototype.cancelByParent=function(){this.abort()},n.prototype.cancelTimer=function(){this.timer&&clearTimeout(this.timer)},n}(),Ce={xmlName:"EnumerationResults",serializedName:"ListFilesAndDirectoriesSegmentResponse",type:{name:"Composite",className:"ListFilesAndDirectoriesSegmentResponse",modelProperties:{serviceEndpoint:{xmlIsAttribute:!0,xmlName:"ServiceEndpoint",required:!0,serializedName:"ServiceEndpoint",type:{name:"String"}},shareName:{xmlIsAttribute:!0,xmlName:"ShareName",required:!0,serializedName:"ShareName",type:{name:"String"}},shareSnapshot:{xmlIsAttribute:!0,xmlName:"ShareSnapshot",serializedName:"ShareSnapshot",type:{name:"String"}},directoryPath:{xmlIsAttribute:!0,xmlName:"DirectoryPath",required:!0,serializedName:"DirectoryPath",type:{name:"String"}},prefix:{xmlName:"Prefix",required:!0,serializedName:"Prefix",type:{name:"String"}},marker:{xmlName:"Marker",serializedName:"Marker",type:{name:"String"}},maxResults:{xmlName:"MaxResults",serializedName:"MaxResults",type:{name:"Number"}},segment:{xmlName:"Entries",required:!0,serializedName:"Segment",type:{name:"Composite",className:"FilesAndDirectoriesListSegment"}},nextMarker:{xmlName:"NextMarker",required:!0,serializedName:"NextMarker",type:{name:"String"}}}}},_e={xmlName:"EnumerationResults",serializedName:"ListSharesResponse",type:{name:"Composite",className:"ListSharesResponse",modelProperties:{serviceEndpoint:{xmlIsAttribute:!0,xmlName:"ServiceEndpoint",required:!0,serializedName:"ServiceEndpoint",type:{name:"String"}},prefix:{xmlName:"Prefix",serializedName:"Prefix",type:{name:"String"}},marker:{xmlName:"Marker",serializedName:"Marker",type:{name:"String"}},maxResults:{xmlName:"MaxResults",serializedName:"MaxResults",type:{name:"Number"}},shareItems:{xmlIsWrapped:!0,xmlName:"Shares",xmlElementName:"Share",serializedName:"ShareItems",type:{name:"Sequence",element:{type:{name:"Composite",className:"ShareItem"}}}},nextMarker:{xmlName:"NextMarker",required:!0,serializedName:"NextMarker",type:{name:"String"}}}}},Oe={serializedName:"StorageError",type:{name:"Composite",className:"StorageError",modelProperties:{message:{xmlName:"Message",serializedName:"Message",type:{name:"String"}}}}},De={serializedName:"ShareStats",type:{name:"Composite",className:"ShareStats",modelProperties:{shareUsage:{xmlName:"ShareUsage",required:!0,serializedName:"ShareUsage",type:{name:"Number"}}}}},Ie={serializedName:"StorageServiceProperties",type:{name:"Composite",className:"StorageServiceProperties",modelProperties:{hourMetrics:{xmlName:"HourMetrics",serializedName:"HourMetrics",type:{name:"Composite",className:"Metrics"}},minuteMetrics:{xmlName:"MinuteMetrics",serializedName:"MinuteMetrics",type:{name:"Composite",className:"Metrics"}},cors:{xmlIsWrapped:!0,xmlName:"Cors",xmlElementName:"CorsRule",serializedName:"Cors",type:{name:"Sequence",element:{type:{name:"Composite",className:"CorsRule"}}}}}}},Le={serializedName:"service-setproperties-headers",type:{name:"Composite",className:"ServiceSetPropertiesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ae={serializedName:"service-getproperties-headers",type:{name:"Composite",className:"ServiceGetPropertiesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},He={serializedName:"service-listsharessegment-headers",type:{name:"Composite",className:"ServiceListSharesSegmentHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ue={serializedName:"share-create-headers",type:{name:"Composite",className:"ShareCreateHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Fe={serializedName:"share-getproperties-headers",type:{name:"Composite",className:"ShareGetPropertiesHeaders",modelProperties:{metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},quota:{serializedName:"x-ms-share-quota",type:{name:"Number"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},je={serializedName:"share-delete-headers",type:{name:"Composite",className:"ShareDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},ke={serializedName:"share-createsnapshot-headers",type:{name:"Composite",className:"ShareCreateSnapshotHeaders",modelProperties:{snapshot:{serializedName:"x-ms-snapshot",type:{name:"String"}},eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Be={serializedName:"share-setquota-headers",type:{name:"Composite",className:"ShareSetQuotaHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ve={serializedName:"share-setmetadata-headers",type:{name:"Composite",className:"ShareSetMetadataHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ge={serializedName:"share-getaccesspolicy-headers",type:{name:"Composite",className:"ShareGetAccessPolicyHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Xe={serializedName:"share-setaccesspolicy-headers",type:{name:"Composite",className:"ShareSetAccessPolicyHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Qe={serializedName:"share-getstatistics-headers",type:{name:"Composite",className:"ShareGetStatisticsHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},$e={serializedName:"directory-create-headers",type:{name:"Composite",className:"DirectoryCreateHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},We={serializedName:"directory-getproperties-headers",type:{name:"Composite",className:"DirectoryGetPropertiesHeaders",modelProperties:{metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ye={serializedName:"directory-delete-headers",type:{name:"Composite",className:"DirectoryDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Je={serializedName:"directory-setmetadata-headers",type:{name:"Composite",className:"DirectorySetMetadataHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ke={serializedName:"directory-listfilesanddirectoriessegment-headers",type:{name:"Composite",className:"DirectoryListFilesAndDirectoriesSegmentHeaders",modelProperties:{contentType:{serializedName:"content-type",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},Ze={serializedName:"file-create-headers",type:{name:"Composite",className:"FileCreateHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},et={serializedName:"file-download-headers",type:{name:"Composite",className:"FileDownloadHeaders",modelProperties:{lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},contentLength:{serializedName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",type:{name:"String"}},contentRange:{serializedName:"content-range",type:{name:"String"}},eTag:{serializedName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",type:{name:"String"}},cacheControl:{serializedName:"cache-control",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},acceptRanges:{serializedName:"accept-ranges",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},copyCompletionTime:{serializedName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},fileContentMD5:{serializedName:"x-ms-content-md5",type:{name:"ByteArray"}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},tt={serializedName:"file-getproperties-headers",type:{name:"Composite",className:"FileGetPropertiesHeaders",modelProperties:{lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},metadata:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},fileType:{serializedName:"x-ms-type",type:{name:"String"}},contentLength:{serializedName:"content-length",type:{name:"Number"}},contentType:{serializedName:"content-type",type:{name:"String"}},eTag:{serializedName:"etag",type:{name:"String"}},contentMD5:{serializedName:"content-md5",type:{name:"ByteArray"}},contentEncoding:{serializedName:"content-encoding",type:{name:"String"}},cacheControl:{serializedName:"cache-control",type:{name:"String"}},contentDisposition:{serializedName:"content-disposition",type:{name:"String"}},contentLanguage:{serializedName:"content-language",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},copyCompletionTime:{serializedName:"x-ms-copy-completion-time",type:{name:"DateTimeRfc1123"}},copyStatusDescription:{serializedName:"x-ms-copy-status-description",type:{name:"String"}},copyId:{serializedName:"x-ms-copy-id",type:{name:"String"}},copyProgress:{serializedName:"x-ms-copy-progress",type:{name:"String"}},copySource:{serializedName:"x-ms-copy-source",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},isServerEncrypted:{serializedName:"x-ms-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},rt={serializedName:"file-delete-headers",type:{name:"Composite",className:"FileDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},nt={serializedName:"file-sethttpheaders-headers",type:{name:"Composite",className:"FileSetHTTPHeadersHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},it={serializedName:"file-setmetadata-headers",type:{name:"Composite",className:"FileSetMetadataHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},at={serializedName:"file-uploadrange-headers",type:{name:"Composite",className:"FileUploadRangeHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},contentMD5:{serializedName:"content-md5",type:{name:"ByteArray"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},isServerEncrypted:{serializedName:"x-ms-request-server-encrypted",type:{name:"Boolean"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},ot={serializedName:"file-getrangelist-headers",type:{name:"Composite",className:"FileGetRangeListHeaders",modelProperties:{lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},eTag:{serializedName:"etag",type:{name:"String"}},fileContentLength:{serializedName:"x-ms-content-length",type:{name:"Number"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},st={serializedName:"file-startcopy-headers",type:{name:"Composite",className:"FileStartCopyHeaders",modelProperties:{eTag:{serializedName:"etag",type:{name:"String"}},lastModified:{serializedName:"last-modified",type:{name:"DateTimeRfc1123"}},requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},copyId:{serializedName:"x-ms-copy-id",type:{name:"String"}},copyStatus:{serializedName:"x-ms-copy-status",type:{name:"Enum",allowedValues:["pending","success","aborted","failed"]}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},ut={serializedName:"file-abortcopy-headers",type:{name:"Composite",className:"FileAbortCopyHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",type:{name:"DateTimeRfc1123"}},errorCode:{serializedName:"x-ms-error-code",type:{name:"String"}}}}},lt=Object.freeze({StorageServiceProperties:Ie,Metrics:{serializedName:"Metrics",type:{name:"Composite",className:"Metrics",modelProperties:{version:{xmlName:"Version",required:!0,serializedName:"Version",type:{name:"String"}},enabled:{xmlName:"Enabled",required:!0,serializedName:"Enabled",type:{name:"Boolean"}},includeAPIs:{xmlName:"IncludeAPIs",serializedName:"IncludeAPIs",type:{name:"Boolean"}},retentionPolicy:{xmlName:"RetentionPolicy",serializedName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}}}}},RetentionPolicy:{serializedName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy",modelProperties:{enabled:{xmlName:"Enabled",required:!0,serializedName:"Enabled",type:{name:"Boolean"}},days:{xmlName:"Days",serializedName:"Days",constraints:{InclusiveMaximum:365,InclusiveMinimum:1},type:{name:"Number"}}}}},CorsRule:{serializedName:"CorsRule",type:{name:"Composite",className:"CorsRule",modelProperties:{allowedOrigins:{xmlName:"AllowedOrigins",required:!0,serializedName:"AllowedOrigins",type:{name:"String"}},allowedMethods:{xmlName:"AllowedMethods",required:!0,serializedName:"AllowedMethods",type:{name:"String"}},allowedHeaders:{xmlName:"AllowedHeaders",required:!0,serializedName:"AllowedHeaders",type:{name:"String"}},exposedHeaders:{xmlName:"ExposedHeaders",required:!0,serializedName:"ExposedHeaders",type:{name:"String"}},maxAgeInSeconds:{xmlName:"MaxAgeInSeconds",required:!0,serializedName:"MaxAgeInSeconds",constraints:{InclusiveMinimum:0},type:{name:"Number"}}}}},ServiceSetPropertiesHeaders:Le,StorageError:Oe,ServiceGetPropertiesHeaders:Ae,ListSharesResponse:_e,ShareItem:{xmlName:"Share",serializedName:"ShareItem",type:{name:"Composite",className:"ShareItem",modelProperties:{name:{xmlName:"Name",required:!0,serializedName:"Name",type:{name:"String"}},snapshot:{xmlName:"Snapshot",serializedName:"Snapshot",type:{name:"String"}},properties:{xmlName:"Properties",required:!0,serializedName:"Properties",type:{name:"Composite",className:"ShareProperties"}},metadata:{xmlName:"Metadata",serializedName:"Metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ShareProperties:{serializedName:"ShareProperties",type:{name:"Composite",className:"ShareProperties",modelProperties:{lastModified:{xmlName:"Last-Modified",required:!0,serializedName:"Last-Modified",type:{name:"DateTimeRfc1123"}},etag:{xmlName:"Etag",required:!0,serializedName:"Etag",type:{name:"String"}},quota:{xmlName:"Quota",required:!0,serializedName:"Quota",type:{name:"Number"}}}}},ServiceListSharesSegmentHeaders:He}),pt={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"properties",type:{name:"String"}}},mt={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"list",type:{name:"String"}}},dt={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"metadata",type:{name:"String"}}},ct={parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"acl",type:{name:"String"}}},ht={parameterPath:["options","fileCacheControl"],mapper:{serializedName:"x-ms-cache-control",type:{name:"String"}}},yt={parameterPath:["options","fileContentDisposition"],mapper:{serializedName:"x-ms-content-disposition",type:{name:"String"}}},ft={parameterPath:["options","fileContentEncoding"],mapper:{serializedName:"x-ms-content-encoding",type:{name:"String"}}},gt={parameterPath:["options","fileContentLanguage"],mapper:{serializedName:"x-ms-content-language",type:{name:"String"}}},vt={parameterPath:["options","fileContentMD5"],mapper:{serializedName:"x-ms-content-md5",type:{name:"ByteArray"}}},Nt={parameterPath:["options","fileContentType"],mapper:{serializedName:"x-ms-content-type",type:{name:"String"}}},St={parameterPath:["options","include"],mapper:{serializedName:"include",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["snapshots","metadata"]}}}},collectionFormat:Ne.Csv},Pt={parameterPath:["options","marker"],mapper:{serializedName:"marker",type:{name:"String"}}},xt={parameterPath:["options","maxresults"],mapper:{serializedName:"maxresults",constraints:{InclusiveMinimum:1},type:{name:"Number"}}},Rt={parameterPath:["options","metadata"],mapper:{serializedName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"}},bt={parameterPath:["options","prefix"],mapper:{serializedName:"prefix",type:{name:"String"}}},zt={parameterPath:["options","quota"],mapper:{serializedName:"x-ms-share-quota",constraints:{InclusiveMinimum:1},type:{name:"Number"}}},Tt={parameterPath:["options","range"],mapper:{serializedName:"x-ms-range",type:{name:"String"}}},Et={parameterPath:"restype",mapper:{required:!0,isConstant:!0,serializedName:"restype",defaultValue:"service",type:{name:"String"}}},wt={parameterPath:"restype",mapper:{required:!0,isConstant:!0,serializedName:"restype",defaultValue:"share",type:{name:"String"}}},qt={parameterPath:"restype",mapper:{required:!0,isConstant:!0,serializedName:"restype",defaultValue:"directory",type:{name:"String"}}},Mt={parameterPath:["options","sharesnapshot"],mapper:{serializedName:"sharesnapshot",type:{name:"String"}}},Ct={parameterPath:["options","timeout"],mapper:{serializedName:"timeout",constraints:{InclusiveMinimum:0},type:{name:"Number"}}},_t={parameterPath:"url",mapper:{required:!0,serializedName:"url",defaultValue:"",type:{name:"String"}},skipEncoding:!0},Ot={parameterPath:"version",mapper:{required:!0,isConstant:!0,serializedName:"x-ms-version",defaultValue:"2018-03-28",type:{name:"String"}}},Dt=function(){function e(e){this.client=e}return e.prototype.setProperties=function(e,t,r){return this.client.sendOperationRequest({storageServiceProperties:e,options:t},Lt,r)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},At,t)},e.prototype.listSharesSegment=function(e,t){return this.client.sendOperationRequest({options:e},Ht,t)},e}(),It=new g(lt,!0),Lt={httpMethod:"PUT",urlParameters:[_t],queryParameters:[Ct,Et,pt],headerParameters:[Ot],requestBody:{parameterPath:"storageServiceProperties",mapper:C({},Ie,{required:!0})},contentType:"application/xml; charset=utf-8",responses:{202:{headersMapper:Le},default:{bodyMapper:Oe}},isXML:!0,serializer:It},At={httpMethod:"GET",urlParameters:[_t],queryParameters:[Ct,Et,pt],headerParameters:[Ot],responses:{200:{bodyMapper:Ie,headersMapper:Ae},default:{bodyMapper:Oe}},isXML:!0,serializer:It},Ht={httpMethod:"GET",urlParameters:[_t],queryParameters:[bt,Pt,xt,St,Ct,mt],headerParameters:[Ot],responses:{200:{bodyMapper:_e,headersMapper:He},default:{bodyMapper:Oe}},isXML:!0,serializer:It},Ut=Object.freeze({ShareCreateHeaders:Ue,StorageError:Oe,ShareGetPropertiesHeaders:Fe,ShareDeleteHeaders:je,ShareCreateSnapshotHeaders:ke,ShareSetQuotaHeaders:Be,ShareSetMetadataHeaders:Ve,SignedIdentifier:{serializedName:"SignedIdentifier",type:{name:"Composite",className:"SignedIdentifier",modelProperties:{id:{xmlName:"Id",required:!0,serializedName:"Id",type:{name:"String"}},accessPolicy:{xmlName:"AccessPolicy",serializedName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy"}}}}},AccessPolicy:{serializedName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy",modelProperties:{start:{xmlName:"Start",serializedName:"Start",type:{name:"String"}},expiry:{xmlName:"Expiry",serializedName:"Expiry",type:{name:"String"}},permission:{xmlName:"Permission",serializedName:"Permission",type:{name:"String"}}}}},ShareGetAccessPolicyHeaders:Ge,ShareSetAccessPolicyHeaders:Xe,ShareStats:De,ShareGetStatisticsHeaders:Qe}),Ft=function(){function e(e){this.client=e}return e.prototype.create=function(e,t){return this.client.sendOperationRequest({options:e},kt,t)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},Bt,t)},e.prototype.deleteMethod=function(e,t){return this.client.sendOperationRequest({options:e},Vt,t)},e.prototype.createSnapshot=function(e,t){return this.client.sendOperationRequest({options:e},Gt,t)},e.prototype.setQuota=function(e,t){return this.client.sendOperationRequest({options:e},Xt,t)},e.prototype.setMetadata=function(e,t){return this.client.sendOperationRequest({options:e},Qt,t)},e.prototype.getAccessPolicy=function(e,t){return this.client.sendOperationRequest({options:e},$t,t)},e.prototype.setAccessPolicy=function(e,t){return this.client.sendOperationRequest({options:e},Wt,t)},e.prototype.getStatistics=function(e,t){return this.client.sendOperationRequest({options:e},Yt,t)},e}(),jt=new g(Ut,!0),kt={httpMethod:"PUT",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt],headerParameters:[Rt,zt,Ot],responses:{201:{headersMapper:Ue},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Bt={httpMethod:"GET",path:"{shareName}",urlParameters:[_t],queryParameters:[Mt,Ct,wt],headerParameters:[Ot],responses:{200:{headersMapper:Fe},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Vt={httpMethod:"DELETE",path:"{shareName}",urlParameters:[_t],queryParameters:[Mt,Ct,wt],headerParameters:[Ot,{parameterPath:["options","deleteSnapshots"],mapper:{serializedName:"x-ms-delete-snapshots",type:{name:"Enum",allowedValues:["include"]}}}],responses:{202:{headersMapper:je},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Gt={httpMethod:"PUT",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"snapshot",type:{name:"String"}}}],headerParameters:[Rt,Ot],responses:{201:{headersMapper:ke},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Xt={httpMethod:"PUT",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt,pt],headerParameters:[Ot,zt],responses:{200:{headersMapper:Be},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Qt={httpMethod:"PUT",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt,dt],headerParameters:[Rt,Ot],responses:{200:{headersMapper:Ve},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},$t={httpMethod:"GET",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt,ct],headerParameters:[Ot],responses:{200:{bodyMapper:{xmlElementName:"SignedIdentifier",serializedName:"parsedResponse",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}},headersMapper:Ge},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Wt={httpMethod:"PUT",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt,ct],headerParameters:[Ot],requestBody:{parameterPath:["options","shareAcl"],mapper:{xmlName:"SignedIdentifiers",xmlElementName:"SignedIdentifier",serializedName:"shareAcl",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}}},contentType:"application/xml; charset=utf-8",responses:{200:{headersMapper:Xe},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Yt={httpMethod:"GET",path:"{shareName}",urlParameters:[_t],queryParameters:[Ct,wt,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"stats",type:{name:"String"}}}],headerParameters:[Ot],responses:{200:{bodyMapper:De,headersMapper:Qe},default:{bodyMapper:Oe}},isXML:!0,serializer:jt},Jt=Object.freeze({DirectoryCreateHeaders:$e,StorageError:Oe,DirectoryGetPropertiesHeaders:We,DirectoryDeleteHeaders:Ye,DirectorySetMetadataHeaders:Je,ListFilesAndDirectoriesSegmentResponse:Ce,FilesAndDirectoriesListSegment:{xmlName:"Entries",serializedName:"FilesAndDirectoriesListSegment",type:{name:"Composite",className:"FilesAndDirectoriesListSegment",modelProperties:{directoryItems:{xmlName:"DirectoryItems",xmlElementName:"Directory",required:!0,serializedName:"DirectoryItems",type:{name:"Sequence",element:{type:{name:"Composite",className:"DirectoryItem"}}}},fileItems:{xmlName:"FileItems",xmlElementName:"File",required:!0,serializedName:"FileItems",type:{name:"Sequence",element:{type:{name:"Composite",className:"FileItem"}}}}}}},DirectoryItem:{xmlName:"Directory",serializedName:"DirectoryItem",type:{name:"Composite",className:"DirectoryItem",modelProperties:{name:{xmlName:"Name",required:!0,serializedName:"Name",type:{name:"String"}}}}},FileItem:{xmlName:"File",serializedName:"FileItem",type:{name:"Composite",className:"FileItem",modelProperties:{name:{xmlName:"Name",required:!0,serializedName:"Name",type:{name:"String"}},properties:{xmlName:"Properties",required:!0,serializedName:"Properties",type:{name:"Composite",className:"FileProperty"}}}}},FileProperty:{serializedName:"FileProperty",type:{name:"Composite",className:"FileProperty",modelProperties:{contentLength:{xmlName:"Content-Length",required:!0,serializedName:"Content-Length",type:{name:"Number"}}}}},DirectoryListFilesAndDirectoriesSegmentHeaders:Ke}),Kt=function(){function e(e){this.client=e}return e.prototype.create=function(e,t){return this.client.sendOperationRequest({options:e},er,t)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},tr,t)},e.prototype.deleteMethod=function(e,t){return this.client.sendOperationRequest({options:e},rr,t)},e.prototype.setMetadata=function(e,t){return this.client.sendOperationRequest({options:e},nr,t)},e.prototype.listFilesAndDirectoriesSegment=function(e,t){return this.client.sendOperationRequest({options:e},ir,t)},e}(),Zt=new g(Jt,!0),er={httpMethod:"PUT",path:"{shareName}/{directory}",urlParameters:[_t],queryParameters:[Ct,qt],headerParameters:[Rt,Ot],responses:{201:{headersMapper:$e},default:{bodyMapper:Oe}},isXML:!0,serializer:Zt},tr={httpMethod:"GET",path:"{shareName}/{directory}",urlParameters:[_t],queryParameters:[Mt,Ct,qt],headerParameters:[Ot],responses:{200:{headersMapper:We},default:{bodyMapper:Oe}},isXML:!0,serializer:Zt},rr={httpMethod:"DELETE",path:"{shareName}/{directory}",urlParameters:[_t],queryParameters:[Ct,qt],headerParameters:[Ot],responses:{202:{headersMapper:Ye},default:{bodyMapper:Oe}},isXML:!0,serializer:Zt},nr={httpMethod:"PUT",path:"{shareName}/{directory}",urlParameters:[_t],queryParameters:[Ct,qt,dt],headerParameters:[Rt,Ot],responses:{200:{headersMapper:Je},default:{bodyMapper:Oe}},isXML:!0,serializer:Zt},ir={httpMethod:"GET",path:"{shareName}/{directory}",urlParameters:[_t],queryParameters:[bt,Mt,Pt,xt,Ct,qt,mt],headerParameters:[Ot],responses:{200:{bodyMapper:Ce,headersMapper:Ke},default:{bodyMapper:Oe}},isXML:!0,serializer:Zt},ar=Object.freeze({FileCreateHeaders:Ze,StorageError:Oe,FileDownloadHeaders:et,FileGetPropertiesHeaders:tt,FileDeleteHeaders:rt,FileSetHTTPHeadersHeaders:nt,FileSetMetadataHeaders:it,FileUploadRangeHeaders:at,Range:{serializedName:"Range",type:{name:"Composite",className:"Range",modelProperties:{start:{xmlName:"Start",required:!0,serializedName:"Start",type:{name:"Number"}},end:{xmlName:"End",required:!0,serializedName:"End",type:{name:"Number"}}}}},FileGetRangeListHeaders:ot,FileStartCopyHeaders:st,FileAbortCopyHeaders:ut}),or=function(){function e(e){this.client=e}return e.prototype.create=function(e,t,r){return this.client.sendOperationRequest({fileContentLength:e,options:t},ur,r)},e.prototype.download=function(e,t){return this.client.sendOperationRequest({options:e},lr,t)},e.prototype.getProperties=function(e,t){return this.client.sendOperationRequest({options:e},pr,t)},e.prototype.deleteMethod=function(e,t){return this.client.sendOperationRequest({options:e},mr,t)},e.prototype.setHTTPHeaders=function(e,t){return this.client.sendOperationRequest({options:e},dr,t)},e.prototype.setMetadata=function(e,t){return this.client.sendOperationRequest({options:e},cr,t)},e.prototype.uploadRange=function(e,t,r,n,i){return this.client.sendOperationRequest({range:e,fileRangeWrite:t,contentLength:r,options:n},hr,i)},e.prototype.getRangeList=function(e,t){return this.client.sendOperationRequest({options:e},yr,t)},e.prototype.startCopy=function(e,t,r){return this.client.sendOperationRequest({copySource:e,options:t},fr,r)},e.prototype.abortCopy=function(e,t,r){return this.client.sendOperationRequest({copyId:e,options:t},gr,r)},e}(),sr=new g(ar,!0),ur={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct],headerParameters:[Ot,{parameterPath:"fileContentLength",mapper:{required:!0,serializedName:"x-ms-content-length",type:{name:"Number"}}},{parameterPath:"fileTypeConstant",mapper:{required:!0,isConstant:!0,serializedName:"x-ms-type",defaultValue:"file",type:{name:"String"}}},Nt,ft,gt,ht,vt,yt,Rt],responses:{201:{headersMapper:Ze},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},lr={httpMethod:"GET",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct],headerParameters:[Ot,Tt,{parameterPath:["options","rangeGetContentMD5"],mapper:{serializedName:"x-ms-range-get-content-md5",type:{name:"Boolean"}}}],responses:{200:{bodyMapper:{serializedName:"parsedResponse",type:{name:"Stream"}},headersMapper:et},206:{bodyMapper:{serializedName:"parsedResponse",type:{name:"Stream"}},headersMapper:et},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},pr={httpMethod:"HEAD",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Mt,Ct],headerParameters:[Ot],responses:{200:{headersMapper:tt},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},mr={httpMethod:"DELETE",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct],headerParameters:[Ot],responses:{202:{headersMapper:rt},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},dr={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct,pt],headerParameters:[Ot,{parameterPath:["options","fileContentLength"],mapper:{serializedName:"x-ms-content-length",type:{name:"Number"}}},Nt,ft,gt,ht,vt,yt],responses:{200:{headersMapper:nt},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},cr={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct,dt],headerParameters:[Rt,Ot],responses:{200:{headersMapper:it},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},hr={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"range",type:{name:"String"}}}],headerParameters:[{parameterPath:"range",mapper:{required:!0,serializedName:"x-ms-range",type:{name:"String"}}},{parameterPath:"fileRangeWrite",mapper:{required:!0,serializedName:"x-ms-write",defaultValue:"update",type:{name:"Enum",allowedValues:["update","clear"]}}},{parameterPath:"contentLength",mapper:{required:!0,serializedName:"Content-Length",type:{name:"Number"}}},{parameterPath:["options","contentMD5"],mapper:{serializedName:"Content-MD5",type:{name:"ByteArray"}}},Ot],requestBody:{parameterPath:["options","optionalbody"],mapper:{serializedName:"optionalbody",type:{name:"Stream"}}},contentType:"application/octet-stream",responses:{201:{headersMapper:at},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},yr={httpMethod:"GET",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Mt,Ct,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"rangelist",type:{name:"String"}}}],headerParameters:[Ot,Tt],responses:{200:{bodyMapper:{xmlElementName:"Range",serializedName:"parsedResponse",type:{name:"Sequence",element:{type:{name:"Composite",className:"Range"}}}},headersMapper:ot},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},fr={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[Ct],headerParameters:[Ot,Rt,{parameterPath:"copySource",mapper:{required:!0,serializedName:"x-ms-copy-source",type:{name:"String"}}}],responses:{202:{headersMapper:st},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},gr={httpMethod:"PUT",path:"{shareName}/{directory}/{fileName}",urlParameters:[_t],queryParameters:[{parameterPath:"copyId",mapper:{required:!0,serializedName:"copyid",type:{name:"String"}}},Ct,{parameterPath:"comp",mapper:{required:!0,isConstant:!0,serializedName:"comp",defaultValue:"copy",type:{name:"String"}}}],headerParameters:[{parameterPath:"copyActionAbortConstant",mapper:{required:!0,isConstant:!0,serializedName:"x-ms-copy-action",defaultValue:"abort",type:{name:"String"}}},Ot],responses:{204:{headersMapper:ut},default:{bodyMapper:Oe}},isXML:!0,serializer:sr},vr=1099511627776,Nr=4194304,Sr=5,Pr={FORCE_BROWSER_NO_CACHE:"_",SHARE_SNAPSHOT:"sharesnapshot",SIGNATURE:"sig",TIMEOUT:"timeout"},xr=409,Rr=404,br=412,zr=416,Tr="content-length",Er="Cookie",wr="x-ms-client-request-id";function qr(e){var t=oe.parse(e),r=t.getPath();return r=r||"/",r=encodeURIComponent(r).replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%"),t.setPath(r),t.toString()}function Mr(e,t){var r=oe.parse(e),n=r.getPath();return n=n?n.endsWith("/")?""+n+t:n+"/"+t:t,r.setPath(n),r.toString()}function Cr(e,t,r){var n=oe.parse(e);return n.setQueryParameter(t,r),n.toString()}function _r(e,t){void 0===t&&(t=!0);var r=e.toISOString();return t?r.substring(0,r.length-1)+"0000Z":r.substring(0,r.length-5)+"Z"}var Or,Dr,Ir=function(r){function e(e,t){return r.call(this,e,t)||this}return x(e,r),e.prototype.sendRequest=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return"GET"!==t.method.toUpperCase()&&"HEAD"!==t.method.toUpperCase()||(t.url=Cr(t.url,Pr.FORCE_BROWSER_NO_CACHE,(new Date).getTime().toString())),t.headers.remove(Er),t.headers.remove(Tr),[2,this._nextPolicy.sendRequest(t)]})})},e}($),Lr=function(){function e(){}return e.prototype.create=function(e,t){return new Ir(e,t)},e}(),Ar=function(i){function e(e,t){var r=this;if(null==e)throw new Error("'url' cannot be null.");if(t||(t={}),!t.userAgent){var n=ne();t.userAgent="azure-storage-file/1.0.0 "+n}return(r=i.call(this,void 0,t)||this).version="2018-03-28",r.baseUri="{url}",r.requestContentType="application/json; charset=utf-8",r.url=e,r}return x(e,i),e}(Te),Hr={logWarningIfTryOverThreshold:3e3},Ur=function(i){function e(e,t,r){void 0===r&&(r=Hr);var n=i.call(this,e,t)||this;return n.tryCount=0,n.operationStartTime=new Date,n.requestStartTime=new Date,n.loggingOptions=r,n}return x(e,i),e.prototype.sendRequest=function(c){return R(this,void 0,void 0,function(){var n,i,a,o,s,u,l,p,m,d;return b(this,function(e){switch(e.label){case 0:this.tryCount++,this.requestStartTime=new Date,1===this.tryCount&&(this.operationStartTime=this.requestStartTime),n=c.url,t=n,r=Pr.SIGNATURE,oe.parse(t).getQueryParameterValue(r)&&(n=Cr(n,Pr.SIGNATURE,"*****")),this.log(h.HttpPipelineLogLevel.INFO,"'"+n+"'==> OUTGOING REQUEST (Try number="+this.tryCount+")."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._nextPolicy.sendRequest(c)];case 2:return i=e.sent(),a=new Date,o=a.getTime()-this.requestStartTime.getTime(),s=a.getTime()-this.operationStartTime.getTime(),u=h.HttpPipelineLogLevel.INFO,l="",this.shouldLog(h.HttpPipelineLogLevel.INFO)&&(l="Successfully Received Response. "),o>=this.loggingOptions.logWarningIfTryOverThreshold&&this.shouldLog(h.HttpPipelineLogLevel.WARNING)&&(u=h.HttpPipelineLogLevel.WARNING,l="SLOW OPERATION. Duration > "+this.loggingOptions.logWarningIfTryOverThreshold+" ms. "),(400<=i.status&&i.status<=499&&i.status!==Rr&&i.status!==xr&&i.status!==br&&i.status!==zr||500<=i.status&&i.status<=509)&&(p="REQUEST ERROR: HTTP request failed with status code: "+i.status+". ",l=p,u=h.HttpPipelineLogLevel.ERROR),m="Request try:"+this.tryCount+", status:"+i.status+" request duration:"+o+" ms, operation duration:"+s+" ms\n",this.log(u,l+m),[2,i];case 3:throw d=e.sent(),this.log(h.HttpPipelineLogLevel.ERROR,"Unexpected failure attempting to make request. Error message: "+d.message),d;case 4:return[2]}var t,r})})},e}($),Fr=function(){function e(e){this.loggingOptions=e}return e.prototype.create=function(e,t){return new Ur(e,t,this.loggingOptions)},e}(),jr=function(){function e(e,t){void 0===t&&(t={}),this.factories=e,this.options=t}return e.prototype.toServiceClientOptions=function(){return{httpClient:this.options.HTTPClient,httpPipelineLogger:this.options.logger,requestPolicyFactories:this.factories}},e}();(Dr=Or||(Or={}))[Dr.EXPONENTIAL=0]="EXPONENTIAL",Dr[Dr.FIXED=1]="FIXED";var kr={maxRetryDelayInMs:12e4,maxTries:4,retryDelayInMs:4e3,retryPolicyType:Or.EXPONENTIAL,tryTimeoutInMs:void 0},Br=function(i){function e(e,t,r){void 0===r&&(r=kr);var n=i.call(this,e,t)||this;return n.retryOptions={retryPolicyType:r.retryPolicyType?r.retryPolicyType:kr.retryPolicyType,maxTries:r.maxTries&&1<=r.maxTries?Math.floor(r.maxTries):kr.maxTries,tryTimeoutInMs:r.tryTimeoutInMs&&0<=r.tryTimeoutInMs?r.tryTimeoutInMs:kr.tryTimeoutInMs,retryDelayInMs:r.retryDelayInMs&&0<=r.retryDelayInMs?Math.min(r.retryDelayInMs,r.maxRetryDelayInMs?r.maxRetryDelayInMs:kr.maxRetryDelayInMs):kr.retryDelayInMs,maxRetryDelayInMs:r.maxRetryDelayInMs&&0<=r.maxRetryDelayInMs?r.maxRetryDelayInMs:kr.maxRetryDelayInMs},n}return x(e,i),e.prototype.sendRequest=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.attemptSendRequest(t,!1,1)]})})},e.prototype.attemptSendRequest=function(a,o,s){return R(this,void 0,void 0,function(){var t,r,n,i;return b(this,function(e){switch(e.label){case 0:t=a.clone(),r=!0,this.retryOptions.tryTimeoutInMs&&(t.url=Cr(t.url,Pr.TIMEOUT,Math.floor(this.retryOptions.tryTimeoutInMs/1e3).toString())),e.label=1;case 1:return e.trys.push([1,3,,4]),this.logf(h.HttpPipelineLogLevel.INFO,"RetryPolicy: =====> Try="+s+" "+(r?"Primary":"Secondary")),[4,this._nextPolicy.sendRequest(t)];case 2:return n=e.sent(),this.shouldRetry(r,s,n)?(o=o||!r&&404===n.status,[3,4]):[2,n];case 3:if(i=e.sent(),this.logf(h.HttpPipelineLogLevel.ERROR,"RetryPolicy: Caught error, message: "+i.message+", code: "+i.code),!this.shouldRetry(r,s,n,i))throw i;return[3,4];case 4:return[4,this.delay(r,s)];case 5:return e.sent(),[4,this.attemptSendRequest(a,o,++s)];case 6:return[2,e.sent()]}})})},e.prototype.shouldRetry=function(e,t,r,n){if(t>=this.retryOptions.maxTries)return this.logf(h.HttpPipelineLogLevel.INFO,"RetryPolicy: Attempt(s) "+t+" >= maxTries "+this.retryOptions.maxTries+", no further try."),!1;if(n)for(var i=0,a=["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNREFUSED","ECONNRESET","ENOENT","ENOTFOUND","TIMEOUT","REQUEST_SEND_ERROR"];i<a.length;i++){var o=a[i];if(n.name.toUpperCase().includes(o)||n.message.toUpperCase().includes(o)||n.code&&n.code.toUpperCase().includes(o))return this.logf(h.HttpPipelineLogLevel.INFO,"RetryPolicy: Network error "+o+" found, will retry."),!0}if(r||n){var s=r?r.status:n?n.statusCode:0;if(!e&&404===s)return this.logf(h.HttpPipelineLogLevel.INFO,"RetryPolicy: Secondary access with 404, will retry."),!0;if(503===s||500===s)return this.logf(h.HttpPipelineLogLevel.INFO,"RetryPolicy: Will retry for status code "+s+"."),!0}return!1},e.prototype.logf=function(e,t){},e.prototype.delay=function(r,n){return R(this,void 0,void 0,function(){var t;return b(this,function(e){if(t=0,r)switch(this.retryOptions.retryPolicyType){case Or.EXPONENTIAL:t=Math.min((Math.pow(2,n-1)-1)*this.retryOptions.retryDelayInMs,this.retryOptions.maxRetryDelayInMs);break;case Or.FIXED:t=this.retryOptions.retryDelayInMs}else t=1e3*Math.random();return this.logf(h.HttpPipelineLogLevel.INFO,"RetryPolicy: Delay for "+t+"ms"),[2,c(t)]})})},e}($),Vr=function(){function e(e){this.retryOptions=e}return e.prototype.create=function(e,t){return new Br(e,t,this.retryOptions)},e}(),Gr=function(i){function e(e,t,r){var n=i.call(this,e,t)||this;return n.telemetry=r,n}return x(e,i),e.prototype.sendRequest=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this._nextPolicy.sendRequest(t)]})})},e}($),Xr=function(){function e(e){this.telemetryString=[].join(" ")}return e.prototype.create=function(e,t){return new Gr(e,t,this.telemetryString)},e}(),Qr=function(r){function e(e,t){return r.call(this,e,t)||this}return x(e,r),e.prototype.sendRequest=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return t.headers.contains(wr)||t.headers.set(wr,y()),[2,this._nextPolicy.sendRequest(t)]})})},e}($),$r=function(){function e(){}return e.prototype.create=function(e,t){return new Qr(e,t)},e}(),Wr=function(){function e(e,t){this.url=qr(e),this.pipeline=t,this.storageClientContext=new Ar(this.url,t.toServiceClientOptions());var r=this.storageClientContext;r.requestContentType&&(r.requestContentType=void 0)}return e.newPipeline=function(e,t){void 0===t&&(t={});var r=[new Xr(t.telemetry),new $r,new Lr,Y(),new Vr(t.retryOptions),new Fr,e];return new jr(r,{HTTPClient:t.httpClient,logger:t.logger})},e}(),Yr=function(n){function r(e,t){var r=n.call(this,e,t)||this;return r.context=new Ft(r.storageClientContext),r}return x(r,n),r.fromServiceURL=function(e,t){return new r(Mr(e.url,t),e.pipeline)},r.prototype.withPipeline=function(e){return new r(this.url,e)},r.prototype.withSnapshot=function(e){return new r(Cr(this.url,Pr.SHARE_SNAPSHOT,0===e.length?void 0:e),this.pipeline)},r.prototype.create=function(t,r){return void 0===r&&(r={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.create(C({},r,{abortSignal:t}))]})})},r.prototype.getProperties=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.getProperties({abortSignal:t})]})})},r.prototype.delete=function(t,r){return void 0===r&&(r={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.deleteMethod(C({abortSignal:t},r))]})})},r.prototype.setMetadata=function(t,r){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.setMetadata({abortSignal:t,metadata:r})]})})},r.prototype.getAccessPolicy=function(o){return R(this,void 0,void 0,function(){var t,r,n,i,a;return b(this,function(e){switch(e.label){case 0:return[4,this.context.getAccessPolicy({abortSignal:o})];case 1:for(t=e.sent(),r={_response:t._response,date:t.date,eTag:t.eTag,lastModified:t.lastModified,requestId:t.requestId,signedIdentifiers:[],version:t.version},n=0,i=t;n<i.length;n++)a=i[n],r.signedIdentifiers.push({accessPolicy:{expiry:new Date(a.accessPolicy.expiry),permission:a.accessPolicy.permission,start:new Date(a.accessPolicy.start)},id:a.id});return[2,r]}})})},r.prototype.setAccessPolicy=function(a,o){return R(this,void 0,void 0,function(){var t,r,n,i;return b(this,function(e){for(t=[],r=0,n=o||[];r<n.length;r++)i=n[r],t.push({accessPolicy:{expiry:_r(i.accessPolicy.expiry),permission:i.accessPolicy.permission,start:_r(i.accessPolicy.start)},id:i.id});return[2,this.context.setAccessPolicy({abortSignal:a,shareAcl:t})]})})},r.prototype.createSnapshot=function(t,r){return void 0===r&&(r={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.createSnapshot(C({abortSignal:t},r))]})})},r.prototype.setQuota=function(t,r){return R(this,void 0,void 0,function(){return b(this,function(e){if(r<=0||5120<r)throw new RangeError("Share quota must be greater than 0, and less than or equal to 5Tib (5120GB)");return[2,this.context.setQuota({abortSignal:t,quota:r})]})})},r.prototype.getStatistics=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.getStatistics({abortSignal:t})]})})},r}(Wr),Jr=function(n){function r(e,t){var r=n.call(this,e,t)||this;return r.context=new Kt(r.storageClientContext),r}return x(r,n),r.fromShareURL=function(e,t){return new r(Mr(e.url,encodeURIComponent(t)),e.pipeline)},r.fromDirectoryURL=function(e,t){return new r(Mr(e.url,encodeURIComponent(t)),e.pipeline)},r.prototype.withPipeline=function(e){return new r(this.url,e)},r.prototype.create=function(t,r){return void 0===r&&(r={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.create(C({},r,{abortSignal:t}))]})})},r.prototype.getProperties=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.getProperties({abortSignal:t})]})})},r.prototype.delete=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.deleteMethod({abortSignal:t})]})})},r.prototype.setMetadata=function(t,r){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.setMetadata({abortSignal:t,metadata:r})]})})},r.prototype.listFilesAndDirectoriesSegment=function(t,r,n){return void 0===n&&(n={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.listFilesAndDirectoriesSegment(C({abortSignal:t,marker:r},n))]})})},r}(Wr);function Kr(e){if(e.offset<0)throw new RangeError("IRange.offset cannot be smaller than 0.");if(e.count&&e.count<=0)throw new RangeError("IRange.count must be larger than 0. Leave it undefined if you want a range from offset to the end.");return e.count?"bytes="+e.offset+"-"+(e.offset+e.count-1):"bytes="+e.offset+"-"}var Zr,en=function(n){function r(e,t){var r=n.call(this,e,t)||this;return r.context=new or(r.storageClientContext),r}return x(r,n),r.fromDirectoryURL=function(e,t){return new r(Mr(e.url,encodeURIComponent(t)),e.pipeline)},r.prototype.withPipeline=function(e){return new r(this.url,e)},r.prototype.create=function(t,r,n){return void 0===n&&(n={}),R(this,void 0,void 0,function(){return b(this,function(e){if(r<0||vr<r)throw new RangeError("File size must >= 0 and < "+vr+".");return n.fileHTTPHeaders=n.fileHTTPHeaders||{},[2,this.context.create(r,C({abortSignal:t},n.fileHTTPHeaders,{metadata:n.metadata}))]})})},r.prototype.download=function(a,o,r,s){return void 0===s&&(s={}),R(this,void 0,void 0,function(){var t,n,i=this;return b(this,function(e){switch(e.label){case 0:if(s.rangeGetContentMD5&&0===o&&void 0===r)throw new RangeError("rangeGetContentMD5 only works with partial data downloading");return t=0===o&&!r,[4,this.context.download({abortSignal:a,onDownloadProgress:d?void 0:s.progress,range:t?void 0:Kr({offset:o,count:r}),rangeGetContentMD5:s.rangeGetContentMD5})];case 1:if(n=e.sent(),!d)return[2,n];if((void 0===s.maxRetryRequests||s.maxRetryRequests<0)&&(s.maxRetryRequests=5),void 0===n.contentLength)throw new RangeError("File download response doesn't contain valid content length header");return[2,new 1(a,n,function(r){return R(i,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return t={range:Kr({count:o+n.contentLength-r,offset:r})},[4,this.context.download(C({abortSignal:a},t))];case 1:return[2,e.sent().readableStreamBody]}})})},o,n.contentLength,{maxRetryRequests:s.maxRetryRequests,progress:s.progress})]}})})},r.prototype.getProperties=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.getProperties({abortSignal:t})]})})},r.prototype.delete=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.deleteMethod({abortSignal:t})]})})},r.prototype.setHTTPHeaders=function(t,r){return void 0===r&&(r={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.setHTTPHeaders(C({abortSignal:t},r))]})})},r.prototype.resize=function(t,r){return R(this,void 0,void 0,function(){return b(this,function(e){if(r<0)throw new RangeError("Size cannot less than 0 when resizing file.");return[2,this.context.setHTTPHeaders({abortSignal:t,fileContentLength:r})]})})},r.prototype.setMetadata=function(t,r){return void 0===r&&(r={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.setMetadata({abortSignal:t,metadata:r})]})})},r.prototype.uploadRange=function(t,r,n,i,a){return void 0===a&&(a={}),R(this,void 0,void 0,function(){return b(this,function(e){if(n<0||i<=0)throw new RangeError("offset must >= 0 and contentLength must be > 0");if(Nr<i)throw new RangeError("offset must be < "+Nr+" bytes");return[2,this.context.uploadRange(Kr({count:i,offset:n}),"update",i,{abortSignal:t,contentMD5:a.contentMD5,onUploadProgress:a.progress,optionalbody:r})]})})},r.prototype.clearRange=function(t,r,n){return R(this,void 0,void 0,function(){return b(this,function(e){if(r<0||n<=0)throw new RangeError("offset must >= 0 and contentLength must be > 0");return[2,this.context.uploadRange(Kr({count:n,offset:r}),"clear",0,{abortSignal:t})]})})},r.prototype.getRangeList=function(r,n){return void 0===n&&(n={}),R(this,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return[4,this.context.getRangeList({abortSignal:r,range:n.range?Kr(n.range):void 0})];case 1:return[2,{_response:(t=e.sent())._response,date:t.date,eTag:t.eTag,errorCode:t.errorCode,fileContentLength:t.fileContentLength,lastModified:t.lastModified,rangeList:t.filter(function(){return!0}),requestId:t.requestId,version:t.version}]}})})},r.prototype.startCopyFromURL=function(t,r,n){return void 0===n&&(n={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.startCopy(r,{abortSignal:t,metadata:n.metadata})]})})},r.prototype.abortCopyFromURL=function(t,r){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.context.abortCopy(r,{abortSignal:t})]})})},r}(Wr),tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.sendRequest=function(e){return this._nextPolicy.sendRequest(this.signRequest(e))},t.prototype.signRequest=function(e){return e},t}($),rn=function(r){function e(e,t){return r.call(this,e,t)||this}return x(e,r),e}(tn),nn=function(){function e(){}return e.prototype.create=function(e,t){throw new Error("Method should be implemented in children classes.")},e}(),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.create=function(e,t){return new rn(e,t)},t}(nn),on="object"==typeof Reflect?Reflect:null,sn=on&&"function"==typeof on.apply?on.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};Zr=on&&"function"==typeof on.ownKeys?on.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var un=Number.isNaN||function(e){return e!=e};function ln(){ln.init.call(this)}var pn=ln;(ln.EventEmitter=ln).prototype._events=void 0,ln.prototype._eventsCount=0,ln.prototype._maxListeners=void 0;var mn=10;function dn(e){return void 0===e._maxListeners?ln.defaultMaxListeners:e._maxListeners}function cn(e,t,r,n){var i,a,o,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),void 0===o)o=a[t]=r,++e._eventsCount;else if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),0<(i=dn(e))&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return e}function hn(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,sn(this.listener,this.target,e))}.bind(n);return i.listener=r,n.wrapFn=i}function yn(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):gn(i,i.length)}function fn(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function gn(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(ln,"defaultMaxListeners",{enumerable:!0,get:function(){return mn},set:function(e){if("number"!=typeof e||e<0||un(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");mn=e}}),ln.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ln.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||un(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ln.prototype.getMaxListeners=function(){return dn(this)},ln.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(0<t.length&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)sn(s,this,t);else{var u=s.length,l=gn(s,u);for(r=0;r<u;++r)sn(l[r],this,t)}return!0},ln.prototype.on=ln.prototype.addListener=function(e,t){return cn(this,e,t,!1)},ln.prototype.prependListener=function(e,t){return cn(this,e,t,!0)},ln.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,hn(this,e,t)),this},ln.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,hn(this,e,t)),this},ln.prototype.off=ln.prototype.removeListener=function(e,t){var r,n,i,a,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;0<=a;a--)if(r[a]===t||r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},ln.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},ln.prototype.listeners=function(e){return yn(this,e,!0)},ln.prototype.rawListeners=function(e){return yn(this,e,!1)},ln.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):fn.call(e,t)},ln.prototype.listenerCount=fn,ln.prototype.eventNames=function(){return 0<this._eventsCount?Zr(this._events):[]};var vn,Nn,Sn=pn.EventEmitter;(Nn=vn||(vn={}))[Nn.Good=0]="Good",Nn[Nn.Error=1]="Error";var Pn=function(){function e(e){if(void 0===e&&(e=5),this.actives=0,this.completed=0,this.offset=0,this.operations=[],this.state=vn.Good,e<1)throw new RangeError("concurrency must be larger than 0");this.concurrency=e,this.emitter=new Sn}return e.prototype.addOperation=function(r){var e=this;this.operations.push(function(){return R(e,void 0,void 0,function(){var t;return b(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.actives++,[4,r()];case 1:return e.sent(),this.actives--,this.completed++,this.parallelExecute(),[3,3];case 2:return t=e.sent(),this.emitter.emit("error",t),[3,3];case 3:return[2]}})})})},e.prototype.do=function(){return R(this,void 0,void 0,function(){var r=this;return b(this,function(e){return this.parallelExecute(),[2,new Promise(function(e,t){r.emitter.on("finish",e),r.emitter.on("error",function(e){r.state=vn.Error,t(e)})})]})})},e.prototype.nextOperation=function(){return this.offset<this.operations.length?this.operations[this.offset++]:null},e.prototype.parallelExecute=function(){if(this.state!==vn.Error)if(this.completed>=this.operations.length)this.emitter.emit("finish");else for(;this.actives<this.concurrency;){var e=this.nextOperation();if(!e)return;e()}},e}();var xn=function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.serviceContext=new Dt(r.storageClientContext),r}return x(t,n),t.prototype.withPipeline=function(e){return new t(this.url,e)},t.prototype.getProperties=function(t){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.serviceContext.getProperties({abortSignal:t})]})})},t.prototype.setProperties=function(t,r){return R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.serviceContext.setProperties(r,{abortSignal:t})]})})},t.prototype.listSharesSegment=function(t,r,n){return void 0===n&&(n={}),R(this,void 0,void 0,function(){return b(this,function(e){return[2,this.serviceContext.listSharesSegment(C({abortSignal:t,marker:r},n))]})})},t}(Wr);h.Models=qe,h.RestError=T,h.Aborter=Me,h.ShareURL=Yr,h.DirectoryURL=Jr,h.FileURL=en,h.AnonymousCredential=an,h.Credential=nn,h.uploadBrowserDataToAzureFile=function(t,n,i,a){return R(this,void 0,void 0,function(){var r;return b(this,function(e){return r=new Blob([n]),[2,function(u,l,p,m,d){return void 0===d&&(d={}),R(this,void 0,void 0,function(){var a,o,t,r,n,s=this;return b(this,function(e){switch(e.label){case 0:if(d.rangeSize||(d.rangeSize=Nr),d.rangeSize<0||d.rangeSize>Nr)throw new RangeError("options.rangeSize must be > 0 and <= "+Nr);if(d.fileHTTPHeaders||(d.fileHTTPHeaders={}),d.parallelism||(d.parallelism=Sr),d.parallelism<0)throw new RangeError("options.parallelism cannot less than 0.");return[4,m.create(u,p,{fileHTTPHeaders:d.fileHTTPHeaders,metadata:d.metadata})];case 1:for(e.sent(),a=Math.floor((p-1)/d.rangeSize)+1,o=0,t=new Pn(d.parallelism),r=function(i){t.addOperation(function(){return R(s,void 0,void 0,function(){var t,r,n;return b(this,function(e){switch(e.label){case 0:return t=d.rangeSize*i,r=i===a-1?p:t+d.rangeSize,n=r-t,[4,m.uploadRange(u,l(t,n),t,n)];case 1:return e.sent(),o+=n,d.progress&&d.progress({loadedBytes:o}),[2]}})})})},n=0;n<a;n++)r(n);return[2,t.do()]}})})}(t,function(e,t){return r.slice(e,e+t)},r.size,i,a)]})})},h.HttpHeaders=m,h.WebResource=M,h.BaseRequestPolicy=$,h.RequestPolicyOptions=W,h.Pipeline=jr,h.AnonymousCredentialPolicy=rn,h.CredentialPolicy=tn,h.RetryPolicyFactory=Vr,h.LoggingPolicyFactory=Fr,h.TelemetryPolicyFactory=Xr,h.UniqueRequestIDPolicyFactory=$r,h.BrowserPolicyFactory=Lr,h.ServiceURL=xn,h.deserializationPolicy=Y,h.StorageURL=Wr,Object.defineProperty(h,"__esModule",{value:!0})});
//# sourceMappingURL=azure-storage.file.min.js.map
