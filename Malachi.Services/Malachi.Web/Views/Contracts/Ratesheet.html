<!-- Main content -->

<script type="text/ng-template" id="inprogress.html">
    <progressbar class="progress-striped active" max="toaster.data.Max" value="toaster.data.Current" type="warning"><i>{{toaster.data.Current}}/{{toaster.data.Max}} Rate Changes</i></progressbar>
</script>

<section class="content">
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="icon-home"></i>
                <a href="#/dashboard">Dashboard</a>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>
                <a href="#/contracts">Contracts</a>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>
                <a href="#/ratesheet" ng-click="cancelRateSheet(RateSheet)">Rates {{Contract.Name}}</a>
                <i class="fa fa-angle-right" ng-show="RateSheet != null"></i>
            </li>
            <li ng-show="RateSheet != null">
                <a href="#" ng-click="closeRates()">{{RateSheet.Name}}</a>
            </li>
        </ul>
    </div>

    <div class="row">

        <div class="col-md-12 bottom-buffer" ng-show="newRateSheet == false">
            <div class="portlet box blue-soft">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-table"></i>Rate Sheets {{Contract.Name}}
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="page-bar">
                        <div class="page-toolbar">
                            <div class="btn-group pull-right">
                                <button class="btn btn-fit-height yellow-casablanca" type="button" ng-click="addNewRateSheet()">
                                    <i class="fa fa-plus margin-right"></i>New Rate Sheet
                                </button>
                            </div>
                        </div>

                    </div>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="rateSheet in RateSheets | orderBy: 'Name'">
                                <td>{{rateSheet.Name}}</td>
                                <td style="text-align: right">
                                    <button class="btn default margin-right" type="button" ng-click="selectRateSheet(rateSheet)">Edit</button>
                                    <button class="btn default" type="button" ng-click="deleteRateSheet(rateSheet)">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-12" ng-show="RateSheetTables != null">
            <h2>{{WindRates ? 'Wind Load' : 'Rates'}}</h2>
            <tabset>
                <tab ng-repeat="table in RateSheetTables" active="table.active" ng-click="changeTable(table)">
                    <tab-heading>
                        {{table.Base ? 'Base - ' : 'Factor - ' }} {{ table.Name  }}
                        <span class="fa fa-files-o" style="cursor:pointer;margin-left:4px;color:black" ng-click="copyTable(table, $event);"></span>
                        <span class="fa fa-close font-red-thunderbird" style="cursor:pointer;margin-left:4px;" ng-click="deleteTable(table)"></span>
                    </tab-heading>
                    <div class="col-sm-12">
                        <button type="button" class="btn btn-xs default btn-circle btn-outline" style="float: right;" ng-click="copyTableTo(table, $event);">Copy To</button>
                    </div>

                    <div class="col-sm-8">
                        <div class="col-sm-12 form-horizontal">
                            <div class="form-group">
                                <div class="col-md-6">
                                    <input class="form-control input-sm" ng-model="table.Name" ng-blur="updateTable(table)" />
                                </div>
                                <div class="col-md-4" ng-show="table.Base && table.Wind == false">
                                    <label style="text-align:left">
                                        <input type="checkbox" ng-model="table.WindIncludedInRate" ng-change="updateTable(table)"> Wind Included In Rate
                                    </label>
                                </div>
                                <div class="col-md-4" ng-show="table.Base == false">
                                    <select class="form-control" ng-model="table.FactorType" ng-change="updateTable(table)">
                                        <option value="0">Factor Multiple</option>
                                        <option value="1">Factor Load</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label style="text-align:left">
                                        <input type="checkbox" ng-model="table.FlatCharge" ng-change="updateTable(table)"> Flat Charge
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 form-horizontal">
                            <div class="form-group">
                                <label class="col-md-4" style="text-align:left; font-weight:bold">Rate By (Horizontal):</label>
                                <div class="col-md-4">
                                    <span class="control-label" style="margin-top:5px">{{getCharacteristicName(table.HorizontalCharacteristicId)}}</span>
                                </div>
                                <div class="col-md-4" ng-show="getCharacteristic(table.HorizontalCharacteristicId).Type == 1">
                                    <label style="text-align:left">
                                        <input type="checkbox" ng-model="table.IsHorizontalMinMax" ng-change="updateTable(table)"> Min Max Relationship
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 form-horizontal">
                            <div class="form-group">
                                <label class="col-md-4" style="text-align:left; font-weight:bold">Rate By (Vertical):</label>
                                <div class="col-md-4">
                                    <span class="control-label" style="margin-top:5px">{{getCharacteristicName(table.VerticalCharacteristicId)}}</span>
                                </div>
                                <div class="col-md-4" ng-show="getCharacteristic(table.VerticalCharacteristicId).Type == 1">
                                    <label style="text-align:left">
                                        <input type="checkbox" ng-model="table.IsVerticalMinMax" ng-change="updateTable(table)"> Min Max Relationship
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 form-horizontal">
                            <div class="form-group">
                                <label class="col-md-4" style="text-align:left; font-weight:bold">Rate By Term:</label>
                                <div class="col-md-4">
                                    <select class="form-control" ng-model="table.RateTerm" ng-change="updateTable(table)">
                                        <option value="0">Default</option>
                                        <option value="1">Monthly</option>
                                        <option value="2">Daily</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4" ng-show="table.FactorType == 0">
                        <label style="font-weight:bold">Apply To Limits:</label>
                        <div style="max-height: 200px; overflow-y: auto;">
                            <div class="col-sm-12" ng-repeat="value in Limits">
                                <label>
                                    <input type="checkbox" checklist-model="table.Limits" checklist-value="value" ng-blur="updateTable(table)"> {{value}}
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-12">
                        <div class="row" style="margin-bottom: 10px">
                            <div class="col-sm-12">
                                <button class="btn btn-primary" ng-click="newTableConditionalGroup(table)">New Condition</button>
                            </div>
                        </div>
                        <accordion close-others="true">
                            <accordion-group ng-repeat="group in table.Conditions | orderBy: 'GroupIndex'">
                                <accordion-heading>
                                    {{group.Name}}
                                </accordion-heading>
                                <input class="form-control" ng-model="group.Name" style="margin-bottom:10px" ng-blur="updateTableConditionGroup(group)" />

                                <div class="row" ng-repeat="condition in group.Conditions | orderBy: 'Index'">
                                    <div class="col-sm-3">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Condition Type</label>
                                                <select class="form-control" ng-model="condition.ConditionName" ng-change="updateTableCondition(condition)">
                                                    <option value="Characteristic">Characteristic</option>
                                                    <option value="State">State</option>
                                                    <option value="ClassCode">Class Code</option>
                                                    <option value="Location TIV">Location TIV</option>
                                                    <option value="Coverage">Coverage</option>
                                                    <option value="Zones">Zones</option>
                                                    <option value="Characteristic Year">Characteristic Year Age</option>
                                                    <option value="Property TIV">Property TIV</option>
                                                    <option value="Liability Limits">Liability Limits</option>
                                                    <option value="Property Limits">Property Limit</option>
                                                    <option value="Wind">Wind</option>
                                                    <option value="Property Coverages">Property Coverages</option>
                                                    <option value="Policy Term">Policy Term</option>
                                                    <option value="Renewal">Is Renewal</option>
                                                    <option value="Policy Endorsement">Is Endorsement</option>
                                                    <option value="Violent Crime">Violent Crime</option>
                                                    <option value="Property Crime">Property Crime</option>
                                                    <option value="Apps">Apps</option>
                                                    <option value="Origin">Origin</option>

                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Coverages' || condition.ConditionName == 'Coverage'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Operator</label>
                                                <select class="form-control" ng-model="condition.Operator" ng-change="updateTableCondition(condition)">
                                                    <option value="0">Included</option>
                                                    <option value="1">Excluded</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'Renewal' || condition.ConditionName == 'Policy Endorsement'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Operator</label>
                                                <select class="form-control" ng-model="condition.Operator" ng-change="updateTableCondition(condition)">
                                                    <option value="0">Yes</option>
                                                    <option value="1">No</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Coverage'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Coverages</label>
                                                <div style="max-height:200px;overflow-y:auto;">
                                                    <div class="col-xs-12" ng-repeat="value in Coverages">
                                                        <label>
                                                            <input type="checkbox" checklist-model="condition.Coverages" checklist-value="value.Name" ng-blur="updateTableCondition(condition)"> {{value.Name}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic' || condition.ConditionName == 'Characteristic Year'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Characteristics</label>
                                                <select class="form-control" ng-options="c.Id as c.Name for c in Characteristics | orderBy:'Name'" ng-model="condition.CharacteristicId" ng-change="updateTableCondition(condition)"></select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Property Coverages'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Property Coverage</label>
                                                <select class="form-control" ng-model="condition.Condition" ng-change="updateTableCondition(condition)">
                                                    <option value="Loss Payee">Loss Payee</option>
                                                    <option value="Protective Safeguard">Protective Safeguard</option>
                                                    <option value="Mortgagee">Mortgagee</option>
                                                    <option value="Scheduled Property">Scheduled Property</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Location TIV'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>TIV (Per Location)</label>
                                                <select class="form-control" ng-model="condition.Condition" ng-change="updateTableCondition(condition)">
                                                    <option value="Total TIV">Total TIV</option>
                                                    <option value="Total TIV (RCV)">Total TIV (RCV)</option>
                                                    <option value="Total TIV (ACV)">Total TIV (ACV)</option>
                                                    <option value="Building Value">Building Value</option>
                                                    <option value="Building Value (RCV)">Building Value (RCV)</option>
                                                    <option value="Building Value (ACV)">Building Value (ACV)</option>
                                                    <option value="BPP & Content">BPP & Content</option>
                                                    <option value="BPP & Content (RCV)">BPP & Content (RCV)</option>
                                                    <option value="BPP & Content (ACV)">BPP & Content (ACV)</option>
                                                    <option value="IMP/BETT">IMP/BETT</option>
                                                    <option value="IMP/BETT (RCV)">IMP/BETT (RCV)</option>
                                                    <option value="IMP/BETT (ACV)">IMP/BETT (ACV)</option>
                                                    <option value="Business Income">Business Income</option>
                                                    <option value="Business Income (w/EE)">Business Income (w/EE)</option>
                                                    <option value="Business Income (wo/EE)">Business Income (wo/EE)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Property TIV'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>TIV (Per Building)</label>
                                                <select class="form-control" ng-model="condition.Condition" ng-change="updateTableCondition(condition)">
                                                    <option value="Total TIV">Total TIV</option>
                                                    <option value="Total TIV (RCV)">Total TIV (RCV)</option>
                                                    <option value="Total TIV (ACV)">Total TIV (ACV)</option>
                                                    <option value="Building Value">Building Value</option>
                                                    <option value="Building Value (RCV)">Building Value (RCV)</option>
                                                    <option value="Building Value (ACV)">Building Value (ACV)</option>
                                                    <option value="BPP & Content">BPP & Content</option>
                                                    <option value="BPP & Content (RCV)">BPP & Content (RCV)</option>
                                                    <option value="BPP & Content (ACV)">BPP & Content (ACV)</option>
                                                    <option value="IMP/BETT">IMP/BETT</option>
                                                    <option value="IMP/BETT (RCV)">IMP/BETT (RCV)</option>
                                                    <option value="IMP/BETT (ACV)">IMP/BETT (ACV)</option>
                                                    <option value="Business Income">Business Income</option>
                                                    <option value="Business Income (w/EE)">Business Income (w/EE)</option>
                                                    <option value="Business Income (wo/EE)">Business Income (wo/EE)</option>
                                                    <option value="Building Value / Square Feet">Building Value / Square Feet</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Liability Limits'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <select class="form-control" ng-model="condition.Condition" ng-change="updateTableCondition(condition)">
                                                    <option value="Deductible">Deductible</option>
                                                    <option value="General Aggregate Limit">General Aggregate Limit</option>
                                                    <option value="Product Aggregate Limit">Product Aggregate Limit</option>
                                                    <option value="Damage to Premises Limit">Damage to Premises Limit</option>
                                                    <option value="Each Occurrence Limit">Each Occurrence Limit</option>
                                                    <option value="Medical Expense Limit">Medical Expense Limit</option>
                                                    <option value="Pers. and Adv. Injury Limit">Pers. and Adv. Injury Limit</option>
                                                    <option value="Products Excluded">Products Excluded</option>
                                                    <option value="Products Included">Products Included</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Building Limit</label>
                                                <select class="form-control" ng-options="limit for limit in Limits" ng-model="condition.Condition" ng-change="updateTableCondition(condition)"></select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Type</label>
                                                <select class="form-control" ng-model="condition.Supplementary" ng-change="updateTableCondition(condition)">
                                                    <option value="Amount">Amount</option>
                                                    <option value="Valuation Basis">Valuation Basis</option>
                                                    <option value="Cause Of Loss">Cause Of Loss</option>
                                                    <option value="Co-Insurance">Co-Insurance</option>
                                                    <option value="EE">EE</option>
                                                    <option value="Payout">Payout</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-1" ng-show="condition.ConditionName == 'Wind' || condition.ConditionName == 'Policy Term' || condition.ConditionName == 'Characteristic' || condition.ConditionName == 'Location TIV' || condition.ConditionName == 'Property TIV' || condition.ConditionName == 'Characteristic Year' || condition.ConditionName == 'Liability Limits' || condition.ConditionName == 'Property Limits' || condition.ConditionName == 'Violent Crime' || condition.ConditionName == 'Property Crime'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Operator</label>
                                                <select class="form-control" ng-model="condition.Operator" ng-change="updateTableCondition(condition)">
                                                    <option value="0">=</option>
                                                    <option value="1"><></option>
                                                    <option value="2"><</option>
                                                    <option value="3">></option>
                                                    <option value="4"><=</option>
                                                    <option value="5">>=</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Property Crime' || condition.ConditionName == 'Violent Crime'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Crime Index</label>
                                                <input type="text" class="form-control" ng-model="condition.ConditionValue" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'Wind'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Operator</label>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateTableCondition(condition)">
                                                    <option value="0">Included</option>
                                                    <option value="1">Excluded</option>
                                                    <option value="3">Only</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Policy Term'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Policy Term</label>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateTableCondition(condition)">
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                    <option value="9">9</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Value</label>
                                                <input class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Amount'" ng-blur="updateTableCondition(condition)" />
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Valuation Basis'" ng-change="updateTableCondition(condition)">
                                                    <option value="RCV">RCV</option>
                                                    <option value="ACV">ACV</option>
                                                </select>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Cause Of Loss'" ng-change="updateTableCondition(condition)">
                                                    <option value="Basic">Basic</option>
                                                    <option value="Special">Special</option>
                                                    <option value="Special Excluding Theft">Special Excluding Theft</option>
                                                    <option value="Broad">Broad</option>
                                                </select>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Co-Insurance'" ng-change="updateTableCondition(condition)">
                                                    <option value="80%">80%</option>
                                                    <option value="90%">90%</option>
                                                    <option value="100%">100%</option>
                                                </select>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'EE'" ng-change="updateTableCondition(condition)">
                                                    <option value="w/EE">w/EE</option>
                                                    <option value="wo/EE">wo/EE</option>
                                                </select>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Payout'" ng-change="updateTableCondition(condition)">
                                                    <option value="1/3">1/3</option>
                                                    <option value="1/4">1/4</option>
                                                    <option value="1/6">1/6</option>
                                                    <option value="1/12">1/12</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic Year'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Value</label>
                                                <input class="form-control" ng-model="condition.ConditionValue" placeholder="Number of years in age from (today)" ng-blur="updateTableCondition(condition)" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Location TIV' || condition.ConditionName == 'Property TIV'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Value</label>
                                                <input class="form-control" ng-model="condition.ConditionValue" mask data-mask="#" ng-blur="updateTableCondition(condition)" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="(condition.ConditionName == 'Liability Limits' && condition.Condition != 'Products Excluded' && condition.Condition != 'Products Included')">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Value</label>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateTableCondition(condition)">
                                                    <option value="Excluded">Excluded</option>
                                                    <option value="500">$500</option>
                                                    <option value="750">$750</option>
                                                    <option value="1,000">$1,000</option>
                                                    <option value="2,000">$2,000</option>
                                                    <option value="2,500">$2,500</option>
                                                    <option value="5,000">$5,000</option>
                                                    <option value="15,000">$15,000</option>
                                                    <option value="20,000">$20,000</option>
                                                    <option value="25,000">$25,000</option>
                                                    <option value="50,000">$50,000</option>
                                                    <option value="100,000">$100,000</option>
                                                    <option value="150,000">$150,000</option>
                                                    <option value="200,000">$200,000</option>
                                                    <option value="250,000">$250,000</option>
                                                    <option value="300,000">$300,000</option>
                                                    <option value="500,000">$500,000</option>
                                                    <option value="600,000">$600,000</option>
                                                    <option value="750,000">$750,000</option>
                                                    <option value="1,000,000">$1,000,000</option>
                                                    <option value="1,500,000">$1,500,000</option>
                                                    <option value="2,000,000">$2,000,000</option>
                                                    <option value="3,000,000">$3,000,000</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Characteristic Values</label>
                                                <div style="max-height: 200px; overflow-y: auto;">
                                                    <div class="col-xs-12" ng-repeat="value in CharacteristicValues(condition.CharacteristicId)">
                                                        <label>
                                                            <input type="checkbox" checklist-model="condition.CharacteristicValues" checklist-value="value.Id" ng-blur="updateTableCondition(condition)"> {{value.Name}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Type</label>
                                                <select class="form-control" ng-model="condition.Condition" ng-change="updateTableCondition(condition)">
                                                    <option value="Contains">Contains</option>
                                                    <option value="Exposure">Exposure</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'State' || (condition.ConditionName == 'ClassCode' && condition.Condition != 'Exposure')
                         || condition.ConditionName == 'Zones' || condition.ConditionName == 'Apps' || condition.ConditionName == 'Origin'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Operator</label>
                                                <select class="form-control" ng-model="condition.Operator" ng-change="updateTableCondition(condition)">
                                                    <option value="0">Contains</option>
                                                    <option value="1">Excludes</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Apps'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Apps</label><br />
                                                <input class="form-control" type="text" ng-model="appSearchTerm" placeholder="Search" style="margin-bottom: 3px;" ng-init="appSearchTerm = ''">
                                                <ul class="check-listbox">
                                                    <li ng-repeat="app in Apps | filter : {'Name' : appSearchTerm}">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" checklist-model="condition.Apps" checklist-value="app.Id" ng-blur="updateTableCondition(condition)">
                                                                {{app.Name}}
                                                            </label>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'Origin'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Value</label>
                                                <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateTableCondition(condition)">
                                                    <option value="Insurance Hero">Insurance Hero</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6" ng-show="condition.ConditionName == 'Zones'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <div class="col-sm-6">
                                                    <button ng-if="ActiveConditionZoneTree == condition" class="btn btn-default btn-block btn-success" ng-click="addSelectedConditionZone(condition); updateTableCondition(condition)">Add Selected</button>
                                                    <div>
                                                        <div ng-if="ActiveConditionZoneTree != condition"><button class="btn btn-default btn-block" ng-click="selectConditionZoneTree(condition)">Click to See Zones</button></div>
                                                        <div ng-if="ActiveConditionZoneTree == condition" tree="condition.treeInstance" js-tree="ZoneConditionConfig" ng-model="ConditionZoneTree" style="height: 150px; border: 1px solid #000; overflow: auto"></div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <button class="btn btn-default pull-right btn-success" ng-click="deleteSelectedConditionZones(condition); updateTableCondition(condition)">Delete Selected</button>
                                                    <select id="zonesList" class="form-control" ng-multiple="true" multiple style="height: 150px;" ng-options="zone.Name for zone in condition.AssignedZones" ng-model="condition.SelectedZones"></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'State'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>States</label><br />
                                                <input class="form-control" type="text" ng-model="searchTerm" placeholder="Search" style="margin-bottom: 3px;" ng-init="searchTerm = ''">
                                                <ul class="check-listbox">
                                                    <li ng-repeat="state in States | filter : {'Name' : searchTerm}">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" checklist-model="condition.States" checklist-value="state.Code" ng-blur="updateTableCondition(condition)">
                                                                {{state.Name}}
                                                            </label>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3" ng-show="condition.ConditionName == 'ClassCode'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Class Codes</label>
                                                <textarea class="form-control" ng-model="condition.ClassCodes" ng-blur="updateTableCondition(condition)"></textarea>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Question ID</label>
                                                <input class="form-control" ng-model="condition.Supplementary" mask data-mask="#" ng-blur="updateTableCondition(condition)" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Operator</label>
                                                <select class="form-control" ng-model="condition.Operator" ng-change="updateTableCondition(condition)">
                                                    <option value="0">=</option>
                                                    <option value="1"><></option>
                                                    <option value="2"><</option>
                                                    <option value="3">></option>
                                                    <option value="4"><=</option>
                                                    <option value="5">>=</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label>Exposure</label>
                                                <input class="form-control" ng-model="condition.ConditionValue" mask data-mask="#" ng-blur="updateTableCondition(condition)" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-1 pull-right">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <button class="btn btn-danger" ng-click="deleteTableCondition(condition, group, table)" ng-mouseenter="hoverParent($event,true)" ng-mouseleave="hoverParent($event,false)" ng-if="group[0] != condition" style="margin-top:25px">Delete</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <button class="btn btn-warning" ng-click="newTableCondition(table, group)">And Condition</button>
                                                <button class="btn btn-danger pull-right" ng-click="deleteTableConditionGroup(group, table.Conditions, table)">Delete Group</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>
                    </div>

                    <div class="col-sm-12" style="overflow:auto; padding-bottom:10px;overflow:hidden">
                        <div class="handsontable" id="rateSheetTable_{{table.Id}}"></div>
                    </div>
                </tab>
                <li>
                    <div class="btn-group">
                        <button type="button" class="btn btn-success dropdown-toggle" style="margin: 3px" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="icon-plus"></i>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#" ng-click="addTable(true, WindRates)">Base</a></li>
                            <li><a href="#" ng-click="addTable(false, WindRates)">Factor</a></li>
                        </ul>
                    </div>
                </li>
                <li class="pull-right">
                    <button class="btn btn-warning" style="margin: 3px" ng-click="closeRates()"><i class="fa fa-compress"></i></button>
                </li>
            </tabset>
        </div>

        <div id="form-body" class="col-md-12 bottom-buffer" ng-show="newRateSheet == true && RateSheetTables == null">
            <div class="portlet box blue-soft">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-table"></i>Rate Sheet Tables {{ activeRateSheet.Name }}
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-body">
                                <div class="form-group">
                                    <label>Name</label>
                                    <input type="text" class="form-control" ng-model="RateSheet.Name" ng-blur="updateRateSheetName(RateSheet)">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <button class="btn btn-default btn-block btn-success" ng-click="addSelectedZone()">Add Selected</button>
                            <div id="zonesTreeParent">
                                <div tree="treeInstance" js-tree="ZoneTreeConfig" ng-model="ZoneTree" style="height: 150px; border: 1px solid #000; overflow: auto"></div>
                            </div>
                        </div>
                        <div class="col-sm-9">
                            <h3 class="pull-left" style="padding: 0; margin: 0">Zones</h3>
                            <button class="btn btn-default pull-right btn-success" ng-click="deleteSelectedZones()">Delete Selected</button>
                            <select id="zonesList" class="form-control" ng-multiple="true" multiple style="height: 150px;" ng-options="zone.Name for zone in rateSheetZones" ng-model="selectedRatesheetZones"></select>
                        </div>
                    </div>


                    <tabset style="margin-top:10px;">
                        <tab heading="Grid">
                            <div class="row" style="margin-top: 10px">
                                <div class="col-sm-12">
                                    <button class="btn btn-default" ng-click="showRates(false)"><i class="fa fa-expand margin-right"></i>Rates</button>
                                    <button class="btn btn-default" ng-click="showRates(true)"><i class="fa fa-expand margin-right"></i>Wind Loads</button>
                                </div>
                            </div>
                        </tab>
                        <tab heading="Conditional">
                            <div class="row" style="margin-top: 10px">
                                <div class="col-sm-12">
                                    <h3>Conditional Rates <button type="button" class="btn btn-xs default btn-circle btn-outline" style="float: right;" ng-click="copyTo('ConditionalRates', $event);">Copy To</button></h3>
                                    <div class="row" style="margin-bottom: 10px">
                                        <div class="col-sm-12">
                                            <button class="btn btn-primary" ng-click="newConditionalGroup(false)">New Rate/Factor</button>
                                            <button class="btn btn-primary" ng-click="newConditionalGroup(true)">New Wind Load/Factor</button>
                                        </div>
                                    </div>
                                    <accordion close-others="true">
                                        <accordion-group ng-repeat="group in RateSheet.Conditions | orderBy: 'GroupIndex'">
                                            <accordion-heading>
                                                {{group.Wind ? "Wind: " : ""}} {{group.Name}} <button type="button" class="btn btn-xs default btn-circle btn-outline" style="float: right;" ng-click="copyGroupTo('ConditionalRate', group, $event);">Copy To</button>
                                            </accordion-heading>
                                            <input class="form-control" ng-model="group.Name" style="margin-bottom:10px" ng-blur="updateConditionGroup(group)" />
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Rate Type</label>
                                                            <select class="form-control" ng-model="group.RateType" ng-change="updateConditionGroup(group)">
                                                                <option value="0">Rate</option>
                                                                <option value="1">Factor Multiple</option>
                                                                <option value="2">Factor Load</option>
                                                                <option value="3">Flat Charge</option>
                                                                <option value="4">Flat Charge Factor Multiple</option>
                                                                <option value="5">Flat Charge Factor Load</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>{{group.RateType == 0 ? "Rate" : group.RateType == 1 ? "Factor Multiple" : group.RateType == 2 ? "Factor Load" : group.RateType == 3 ? "Flat Charge" : group.RateType == 4 ? "Flat Charge Factor Multiple" : "Flat Charge Factor Load"}}</label>
                                                            <input type="text" class="form-control" ng-model="group.Rate" ng-blur="updateConditionGroup(group)" ng-disabled="group.IsGrossLoss" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>
                                                                <input type="checkbox" ng-model="group.IsGrossLoss" ng-change="updateConditionGroup(group)" style="margin-top: 28px;" ng-disabled="group.IsMinRate || group.IsMinFinalRate"> Use Gross Loss API
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>
                                                                <input type="checkbox" ng-model="group.IsMinRate" ng-change="updateConditionGroup(group)" style="margin-top: 28px;" ng-disabled="group.IsGrossLoss || group.IsMinFinalRate"> Minimum Rate
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>
                                                                <input type="checkbox" ng-model="group.IsMinFinalRate" ng-change="updateConditionGroup(group)" style="margin-top: 28px;" ng-disabled="group.IsGrossLoss || group.IsMinRate"> Minimum Final Rate
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="group.RateType < 3" style="max-height: 200px; overflow-y: auto;">
                                                    <div class="col-sm-12" ng-repeat="value in Limits">
                                                        <label>
                                                            <input type="checkbox" checklist-model="group.Limits" checklist-value="value" ng-blur="updateConditionGroup(group)"> {{value}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <hr style="clear:both" />

                                            <div class="row" ng-repeat="condition in group.Conditions | orderBy: 'Index'">
                                                <div class="col-sm-3">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Condition Type</label>
                                                            <select class="form-control" ng-model="condition.ConditionName" ng-change="updateCondition(condition)">
                                                                <option value="Characteristic">Characteristic</option>
                                                                <option value="State">State</option>
                                                                <option value="ClassCode">Class Code</option>
                                                                <option value="Location TIV">Location TIV</option>
                                                                <option value="Coverage">Coverage</option>
                                                                <option value="Zones">Zones</option>
                                                                <option value="Characteristic Year">Characteristic Year Age</option>
                                                                <option value="Property TIV">Property TIV</option>
                                                                <option value="Liability Limits">Liability Limits</option>
                                                                <option value="Property Limits">Property Limit</option>
                                                                <option value="Wind">Wind</option>
                                                                <option value="Property Coverages">Property Coverages</option>
                                                                <option value="Policy Term">Policy Term</option>
                                                                <option value="Renewal">Is Renewal</option>
                                                                <option value="Policy Endorsement">Is Endorsement</option>
                                                                <option value="Apps">Apps</option>
                                                                <option value="Origin">Origin</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Coverages' || condition.ConditionName == 'Coverage'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateCondition(condition)">
                                                                <option value="0">Included</option>
                                                                <option value="1">Excluded</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Renewal' || condition.ConditionName == 'Policy Endorsement'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateCondition(condition)">
                                                                <option value="0">Yes</option>
                                                                <option value="1">No</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Coverage'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Coverages</label>
                                                            <div style="max-height:200px;overflow-y:auto;">
                                                                <div class="col-xs-12" ng-repeat="value in Coverages">
                                                                    <label>
                                                                        <input type="checkbox" checklist-model="condition.Coverages" checklist-value="value.Name" ng-blur="updateCondition(condition)"> {{value.Name}}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic' || condition.ConditionName == 'Characteristic Year'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Characteristics</label>
                                                            <select class="form-control" ng-options="c.Id as c.Name for c in Characteristics | orderBy:'Name'" ng-model="condition.CharacteristicId" ng-change="updateCondition(condition)"></select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Property Coverages'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Property Coverage</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateCondition(condition)">
                                                                <option value="Loss Payee">Loss Payee</option>
                                                                <option value="Protective Safeguard">Protective Safeguard</option>
                                                                <option value="Mortgagee">Mortgagee</option>
                                                                <option value="Scheduled Property">Scheduled Property</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Location TIV'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>TIV (Per Location)</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateCondition(condition)">
                                                                <option value="Total TIV">Total TIV</option>
                                                                <option value="Total TIV (RCV)">Total TIV (RCV)</option>
                                                                <option value="Total TIV (ACV)">Total TIV (ACV)</option>
                                                                <option value="Building Value">Building Value</option>
                                                                <option value="Building Value (RCV)">Building Value (RCV)</option>
                                                                <option value="Building Value (ACV)">Building Value (ACV)</option>
                                                                <option value="BPP & Content">BPP & Content</option>
                                                                <option value="BPP & Content (RCV)">BPP & Content (RCV)</option>
                                                                <option value="BPP & Content (ACV)">BPP & Content (ACV)</option>
                                                                <option value="IMP/BETT">IMP/BETT</option>
                                                                <option value="IMP/BETT (RCV)">IMP/BETT (RCV)</option>
                                                                <option value="IMP/BETT (ACV)">IMP/BETT (ACV)</option>
                                                                <option value="Business Income">Business Income</option>
                                                                <option value="Business Income (w/EE)">Business Income (w/EE)</option>
                                                                <option value="Business Income (wo/EE)">Business Income (wo/EE)</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Property TIV'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>TIV (Per Building)</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateTable(table)">
                                                                <option value="Total TIV">Total TIV</option>
                                                                <option value="Total TIV (RCV)">Total TIV (RCV)</option>
                                                                <option value="Total TIV (ACV)">Total TIV (ACV)</option>
                                                                <option value="Building Value">Building Value</option>
                                                                <option value="Building Value (RCV)">Building Value (RCV)</option>
                                                                <option value="Building Value (ACV)">Building Value (ACV)</option>
                                                                <option value="BPP & Content">BPP & Content</option>
                                                                <option value="BPP & Content (RCV)">BPP & Content (RCV)</option>
                                                                <option value="BPP & Content (ACV)">BPP & Content (ACV)</option>
                                                                <option value="IMP/BETT">IMP/BETT</option>
                                                                <option value="IMP/BETT (RCV)">IMP/BETT (RCV)</option>
                                                                <option value="IMP/BETT (ACV)">IMP/BETT (ACV)</option>
                                                                <option value="Business Income">Business Income</option>
                                                                <option value="Business Income (w/EE)">Business Income (w/EE)</option>
                                                                <option value="Business Income (wo/EE)">Business Income (wo/EE)</option>
                                                                <option value="Building Value / Square Feet">Building Value / Square Feet</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Liability Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateCondition(condition)">
                                                                <option value="0">Deductible</option>
                                                                <option value="1">General Aggregate Limit</option>
                                                                <option value="2">Product Aggregate Limit</option>
                                                                <option value="3">Damage to Premises Limit</option>
                                                                <option value="4">Each Occurrence Limit</option>
                                                                <option value="5">Medical Expense Limit</option>
                                                                <option value="6">Pers. and Adv. Injury Limit</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Building Limit</label>
                                                            <select class="form-control" ng-options="limit for limit in Limits" ng-model="condition.Condition" ng-change="updateCondition(condition)"></select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Type</label>
                                                            <select class="form-control" ng-model="condition.Supplementary" ng-change="updateCondition(condition)">
                                                                <option value="Amount">Amount</option>
                                                                <option value="Valuation Basis">Valuation Basis</option>
                                                                <option value="Cause Of Loss">Cause Of Loss</option>
                                                                <option value="Co-Insurance">Co-Insurance</option>
                                                                <option value="EE">EE</option>
                                                                <option value="Payout">Payout</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'Wind' || condition.ConditionName == 'Policy Term' || condition.ConditionName == 'Characteristic' || condition.ConditionName == 'Location TIV' || condition.ConditionName == 'Property TIV' || condition.ConditionName == 'Characteristic Year' || condition.ConditionName == 'Liability Limits' || condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateCondition(condition)">
                                                                <option value="0">=</option>
                                                                <option value="1"><></option>
                                                                <option value="2"><</option>
                                                                <option value="3">></option>
                                                                <option value="4"><=</option>
                                                                <option value="5">>=</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Wind'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateCondition(condition)">
                                                                <option value="0">Included</option>
                                                                <option value="1">Excluded</option>
                                                                <option value="3">Only</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Policy Term'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Policy Term</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateCondition(condition)">
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                                <option value="5">5</option>
                                                                <option value="6">6</option>
                                                                <option value="7">7</option>
                                                                <option value="8">8</option>
                                                                <option value="9">9</option>
                                                                <option value="10">10</option>
                                                                <option value="11">11</option>
                                                                <option value="12">12</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Amount'" ng-blur="updateCondition(condition)" />
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Valuation Basis'" ng-change="updateCondition(condition)">
                                                                <option value="RCV">RCV</option>
                                                                <option value="ACV">ACV</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Cause Of Loss'" ng-change="updateCondition(condition)">
                                                                <option value="Basic">Basic</option>
                                                                <option value="Special">Special</option>
                                                                <option value="Special Excluding Theft">Special Excluding Theft</option>
                                                                <option value="Broad">Broad</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Co-Insurance'" ng-change="updateCondition(condition)">
                                                                <option value="80%">80%</option>
                                                                <option value="90%">90%</option>
                                                                <option value="100%">100%</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'EE'" ng-change="updateCondition(condition)">
                                                                <option value="w/EE">w/EE</option>
                                                                <option value="wo/EE">wo/EE</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Payout'" ng-change="updateCondition(condition)">
                                                                <option value="1/3">1/3</option>
                                                                <option value="1/4">1/4</option>
                                                                <option value="1/6">1/6</option>
                                                                <option value="1/12">1/12</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic Year'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" placeholder="Number of years in age from (today)" ng-blur="updateCondition(condition)" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Location TIV' || condition.ConditionName == 'Property TIV' ">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" mask data-mask="#" ng-blur="updateCondition(condition)" />
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="(condition.ConditionName == 'Liability Limits' && condition.Condition != 'Products Excluded' && condition.Condition != 'Products Included')">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateCondition(condition)">
                                                                <option value="Excluded">Excluded</option>
                                                                <option value="500">$500</option>
                                                                <option value="750">$750</option>
                                                                <option value="1,000">$1,000</option>
                                                                <option value="2,000">$2,000</option>
                                                                <option value="2,500">$2,500</option>
                                                                <option value="5,000">$5,000</option>
                                                                <option value="15,000">$15,000</option>
                                                                <option value="20,000">$20,000</option>
                                                                <option value="25,000">$25,000</option>
                                                                <option value="50,000">$50,000</option>
                                                                <option value="100,000">$100,000</option>
                                                                <option value="150,000">$150,000</option>
                                                                <option value="200,000">$200,000</option>
                                                                <option value="250,000">$250,000</option>
                                                                <option value="300,000">$300,000</option>
                                                                <option value="500,000">$500,000</option>
                                                                <option value="600,000">$600,000</option>
                                                                <option value="750,000">$750,000</option>
                                                                <option value="1,000,000">$1,000,000</option>
                                                                <option value="1,500,000">$1,500,000</option>
                                                                <option value="2,000,000">$2,000,000</option>
                                                                <option value="3,000,000">$3,000,000</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Characteristic Values</label>
                                                            <div style="max-height: 200px; overflow-y: auto;">
                                                                <div class="col-xs-12" ng-repeat="value in CharacteristicValues(condition.CharacteristicId)">
                                                                    <label>
                                                                        <input type="checkbox" checklist-model="condition.CharacteristicValues" checklist-value="value.Id" ng-blur="updateCondition(condition)"> {{value.Name}}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Type</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateCondition(condition)">
                                                                <option value="Contains">Contains</option>
                                                                <option value="Exposure">Exposure</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'State' || (condition.ConditionName == 'ClassCode' && condition.Condition != 'Exposure')
                             || condition.ConditionName == 'Zones' || condition.ConditionName == 'Apps'|| condition.ConditionName == 'Origin'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateCondition(condition)">
                                                                <option value="0">Contains</option>
                                                                <option value="1">Excludes</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Apps'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Apps</label><br />
                                                            <input class="form-control" type="text" ng-model="appSearchTerm" placeholder="Search" style="margin-bottom: 3px;" ng-init="appSearchTerm = ''">
                                                            <ul class="check-listbox">
                                                                <li ng-repeat="app in Apps | filter : {'Name' : appSearchTerm}">
                                                                    <div class="checkbox">
                                                                        <label>
                                                                            <input type="checkbox" checklist-model="condition.Apps" checklist-value="app.Id" ng-blur="updateCondition(condition)">
                                                                            {{app.Name}}
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Origin'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateCondition(condition)">
                                                                <option value="Insurance Hero">Insurance Hero</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-6" ng-show="condition.ConditionName == 'Zones'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <div class="col-sm-6">
                                                                <button ng-if="ActiveConditionZoneTree == condition" class="btn btn-default btn-block btn-success" ng-click="addSelectedConditionZone(condition); updateCondition(condition)">Add Selected</button>
                                                                <div>
                                                                    <div ng-if="ActiveConditionZoneTree != condition"><button class="btn btn-default btn-block" ng-click="selectConditionZoneTree(condition)">Click to See Zones</button></div>
                                                                    <div ng-if="ActiveConditionZoneTree == condition" tree="condition.treeInstance" js-tree="ZoneConditionConfig" ng-model="ConditionZoneTree" style="height: 150px; border: 1px solid #000; overflow: auto"></div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <button class="btn btn-default pull-right btn-success" ng-click="deleteSelectedConditionZones(condition); updateCondition(condition)">Delete Selected</button>
                                                                <select id="zonesList" class="form-control" ng-multiple="true" multiple style="height: 150px;" ng-options="zone.Name for zone in condition.AssignedZones" ng-model="condition.SelectedZones"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'State'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>States</label><br />
                                                            <input class="form-control" type="text" ng-model="searchTermCondition" placeholder="Search" style="margin-bottom: 3px;" ng-init="searchTermCondition = ''">
                                                            <ul class="check-listbox">
                                                                <li ng-repeat="state in States | filter : {'Name' : searchTermCondition}">
                                                                    <div class="checkbox">
                                                                        <label>
                                                                            <input type="checkbox" checklist-model="condition.States" checklist-value="state.Code" ng-blur="updateCondition(condition)">
                                                                            {{state.Name}}
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'ClassCode'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Class Codes</label>
                                                            <textarea class="form-control" ng-model="condition.ClassCodes" ng-blur="updateCondition(condition)"></textarea>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Question ID</label>
                                                            <input class="form-control" ng-model="condition.Supplementary" mask data-mask="#" ng-blur="updateCondition(condition)" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateCondition(condition)">
                                                                <option value="0">=</option>
                                                                <option value="1"><></option>
                                                                <option value="2"><</option>
                                                                <option value="3">></option>
                                                                <option value="4"><=</option>
                                                                <option value="5">>=</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Exposure</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" mask data-mask="#" ng-blur="updateCondition(condition)" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 pull-right">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <button class="btn btn-danger" ng-click="deleteCondition(condition, group)" ng-mouseenter="hoverParent($event,true)" ng-mouseleave="hoverParent($event,false)" ng-if="group[0] != condition" style="margin-top:25px">Delete</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <button class="btn btn-warning" ng-click="newCondition(group)">New Condition</button>
                                                            <button class="btn btn-danger pull-right" ng-click="deleteGroup(group, RateSheet.Conditions)">Delete Group</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </accordion-group>
                                    </accordion>
                                </div>
                            </div>
                        </tab>
                        <tab heading="Exclusions">
                            <div class="row" style="margin-top: 10px">
                                <div class="col-sm-12">
                                    <h3>Exclusions <button type="button" class="btn btn-xs default btn-circle btn-outline" style="float: right;" ng-click="copyTo('Exclusions', $event);">Copy To</button></h3>
                                    <div class="row" style="margin-bottom: 10px">
                                        <div class="col-sm-12">
                                            <button class="btn btn-primary" ng-click="newExclusionGroup(false)">New Exclusion </button>
                                            <button class="btn btn-primary" ng-click="newExclusionGroup(true)">New Wind Exclusion </button>
                                        </div>
                                    </div>
                                    <accordion close-others="true">
                                        <accordion-group ng-repeat="group in RateSheet.Exclusions | orderBy: 'GroupIndex'">
                                            <accordion-heading>
                                                {{group.Wind ? "Wind: " : ""}} {{group.Name}} <button type="button" class="btn btn-xs default btn-circle btn-outline" style="float: right;" ng-click="copyGroupTo('Exclusion', group, $event); ">Copy To</button>
                                            </accordion-heading>
                                            <input class="form-control" ng-model="group.Name" style="margin-bottom:10px" ng-blur="updateExclusionGroup(group)" />
                                            <div class="row" ng-repeat="condition in group.Conditions | orderBy: 'Index'">
                                                <div class="col-sm-3">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Condition Type</label>
                                                            <select class="form-control" ng-model="condition.ConditionName" ng-change="updateExclusion(condition)">
                                                                <option value="Characteristic">Characteristic</option>
                                                                <option value="State">State</option>
                                                                <option value="ClassCode">Class Code</option>
                                                                <option value="Location TIV">Location TIV</option>
                                                                <option value="Coverage">Coverage</option>
                                                                <option value="Zones">Zones</option>
                                                                <option value="Characteristic Year">Characteristic Year Age</option>
                                                                <option value="Property TIV">Property TIV</option>
                                                                <option value="Liability Limits">Liability Limits</option>
                                                                <option value="Property Limits">Property Limit</option>
                                                                <option value="Wind">Wind</option>
                                                                <option value="Property Coverages">Property Coverages</option>
                                                                <option value="Policy Term">Policy Term</option>
                                                                <option value="Renewal">Is Renewal</option>
                                                                <option value="Policy Endorsement">Is Endorsement</option>
                                                                <option value="Violent Crime">Violent Crime</option>
                                                                <option value="Property Crime">Property Crime</option>
                                                                <option value="Apps">Apps</option>
                                                                <option value="Origin">Origin</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show=" condition.ConditionName == 'Property Coverages' || condition.ConditionName == 'Coverage'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateExclusion(condition)">
                                                                <option value="0">Included</option>
                                                                <option value="1">Excluded</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Renewal' || condition.ConditionName == 'Policy Endorsement'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateExclusion(condition)">
                                                                <option value="0">Yes</option>
                                                                <option value="1">No</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Coverage'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Coverages</label>
                                                            <div style="max-height:200px;overflow-y:auto;">
                                                                <div class="col-xs-12" ng-repeat="value in Coverages">
                                                                    <label>
                                                                        <input type="checkbox" checklist-model="condition.Coverages" checklist-value="value.Name" ng-blur="updateExclusion(condition)"> {{value.Name}}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic' || condition.ConditionName == 'Characteristic Year'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Characteristics</label>
                                                            <select class="form-control" ng-options="c.Id as c.Name for c in Characteristics | orderBy:'Name'" ng-model="condition.CharacteristicId" ng-change="updateExclusion(condition)"></select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Property Coverages'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Property Coverage</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateExclusion(condition)">
                                                                <option value="Loss Payee">Loss Payee</option>
                                                                <option value="Protective Safeguard">Protective Safeguard</option>
                                                                <option value="Mortgagee">Mortgagee</option>
                                                                <option value="Scheduled Property">Scheduled Property</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Location TIV'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>TIV (Per Location)</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateExclusion(condition)">
                                                                <option value="Total TIV">Total TIV</option>
                                                                <option value="Total TIV (RCV)">Total TIV (RCV)</option>
                                                                <option value="Total TIV (ACV)">Total TIV (ACV)</option>
                                                                <option value="Building Value">Building Value</option>
                                                                <option value="Building Value (RCV)">Building Value (RCV)</option>
                                                                <option value="Building Value (ACV)">Building Value (ACV)</option>
                                                                <option value="BPP & Content">BPP & Content</option>
                                                                <option value="BPP & Content (RCV)">BPP & Content (RCV)</option>
                                                                <option value="BPP & Content (ACV)">BPP & Content (ACV)</option>
                                                                <option value="IMP/BETT">IMP/BETT</option>
                                                                <option value="IMP/BETT (RCV)">IMP/BETT (RCV)</option>
                                                                <option value="IMP/BETT (ACV)">IMP/BETT (ACV)</option>
                                                                <option value="Business Income">Business Income</option>
                                                                <option value="Business Income (w/EE)">Business Income (w/EE)</option>
                                                                <option value="Business Income (wo/EE)">Business Income (wo/EE)</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Property TIV'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>TIV (Per Building)</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateExclusion(condition)">
                                                                <option value="Total TIV">Total TIV</option>
                                                                <option value="Total TIV (RCV)">Total TIV (RCV)</option>
                                                                <option value="Total TIV (ACV)">Total TIV (ACV)</option>
                                                                <option value="Building Value">Building Value</option>
                                                                <option value="Building Value (RCV)">Building Value (RCV)</option>
                                                                <option value="Building Value (ACV)">Building Value (ACV)</option>
                                                                <option value="BPP & Content">BPP & Content</option>
                                                                <option value="BPP & Content (RCV)">BPP & Content (RCV)</option>
                                                                <option value="BPP & Content (ACV)">BPP & Content (ACV)</option>
                                                                <option value="IMP/BETT">IMP/BETT</option>
                                                                <option value="IMP/BETT (RCV)">IMP/BETT (RCV)</option>
                                                                <option value="IMP/BETT (ACV)">IMP/BETT (ACV)</option>
                                                                <option value="Business Income">Business Income</option>
                                                                <option value="Business Income (w/EE)">Business Income (w/EE)</option>
                                                                <option value="Business Income (wo/EE)">Business Income (wo/EE)</option>
                                                                <option value="Building Value / Square Feet">Building Value / Square Feet</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Liability Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateExclusion(condition)">
                                                                <option value="0">Deductible</option>
                                                                <option value="1">General Aggregate Limit</option>
                                                                <option value="2">Product Aggregate Limit</option>
                                                                <option value="3">Damage to Premises Limit</option>
                                                                <option value="4">Each Occurrence Limit</option>
                                                                <option value="5">Medical Expense Limit</option>
                                                                <option value="6">Pers. and Adv. Injury Limit</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Building Limit</label>
                                                            <select class="form-control" ng-options="limit for limit in Limits" ng-model="condition.Condition" ng-change="updateExclusion(condition)"></select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Type</label>
                                                            <select class="form-control" ng-model="condition.Supplementary" ng-change="updateExclusion(condition)">
                                                                <option value="Amount">Amount</option>
                                                                <option value="Valuation Basis">Valuation Basis</option>
                                                                <option value="Cause Of Loss">Cause Of Loss</option>
                                                                <option value="Co-Insurance">Co-Insurance</option>
                                                                <option value="EE">EE</option>
                                                                <option value="Payout">Payout</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'Wind' || condition.ConditionName == 'Policy Term' || condition.ConditionName == 'Characteristic' || condition.ConditionName == 'Location TIV' || condition.ConditionName == 'Property TIV' || condition.ConditionName == 'Characteristic Year' || condition.ConditionName == 'Liability Limits' || condition.ConditionName == 'Property Limits' || condition.ConditionName == 'Violent Crime' || condition.ConditionName == 'Property Crime'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateExclusion(condition)">
                                                                <option value="0">=</option>
                                                                <option value="1"><></option>
                                                                <option value="2"><</option>
                                                                <option value="3">></option>
                                                                <option value="4"><=</option>
                                                                <option value="5">>=</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Property Crime' || condition.ConditionName == 'Violent Crime'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Crime Index</label>
                                                            <input type="text" class="form-control" ng-model="condition.ConditionValue" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Wind'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateExclusion(condition)">
                                                                <option value="0">Included</option>
                                                                <option value="1">Excluded</option>
                                                                <option value="3">Only</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Policy Term'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Policy Term</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateExclusion(condition)">
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                                <option value="5">5</option>
                                                                <option value="6">6</option>
                                                                <option value="7">7</option>
                                                                <option value="8">8</option>
                                                                <option value="9">9</option>
                                                                <option value="10">10</option>
                                                                <option value="11">11</option>
                                                                <option value="12">12</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'Property Limits'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Amount'" ng-blur="updateExclusion(condition)" />
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Valuation Basis'" ng-change="updateExclusion(condition)">
                                                                <option value="RCV">RCV</option>
                                                                <option value="ACV">ACV</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Cause Of Loss'" ng-change="updateExclusion(condition)">
                                                                <option value="Basic">Basic</option>
                                                                <option value="Special">Special</option>
                                                                <option value="Special Excluding Theft">Special Excluding Theft</option>
                                                                <option value="Broad">Broad</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Co-Insurance'" ng-change="updateExclusion(condition)">
                                                                <option value="80%">80%</option>
                                                                <option value="90%">90%</option>
                                                                <option value="100%">100%</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'EE'" ng-change="updateExclusion(condition)">
                                                                <option value="w/EE">w/EE</option>
                                                                <option value="wo/EE">wo/EE</option>
                                                            </select>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-show="condition.Supplementary == 'Payout'" ng-change="updateExclusion(condition)">
                                                                <option value="1/3">1/3</option>
                                                                <option value="1/4">1/4</option>
                                                                <option value="1/6">1/6</option>
                                                                <option value="1/12">1/12</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic Year'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" placeholder="Number of years in age from (today)" ng-blur="updateExclusion(condition)" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Location TIV' || condition.ConditionName == 'Property TIV'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" mask data-mask="#" ng-blur="updateExclusion(condition)" />
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-sm-3" ng-show="(condition.ConditionName == 'Liability Limits' && condition.Condition != 'Products Excluded' && condition.Condition != 'Products Included')">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateCondition(condition)">
                                                                <option value="Excluded">Excluded</option>
                                                                <option value="500">$500</option>
                                                                <option value="750">$750</option>
                                                                <option value="1,000">$1,000</option>
                                                                <option value="2,000">$2,000</option>
                                                                <option value="2,500">$2,500</option>
                                                                <option value="5,000">$5,000</option>
                                                                <option value="10,000">$10,000</option>
                                                                <option value="15,000">$15,000</option>
                                                                <option value="20,000">$20,000</option>
                                                                <option value="25,000">$25,000</option>
                                                                <option value="50,000">$50,000</option>
                                                                <option value="100,000">$100,000</option>
                                                                <option value="150,000">$150,000</option>
                                                                <option value="200,000">$200,000</option>
                                                                <option value="250,000">$250,000</option>
                                                                <option value="300,000">$300,000</option>
                                                                <option value="500,000">$500,000</option>
                                                                <option value="600,000">$600,000</option>
                                                                <option value="750,000">$750,000</option>
                                                                <option value="1,000,000">$1,000,000</option>
                                                                <option value="1,500,000">$1,500,000</option>
                                                                <option value="2,000,000">$2,000,000</option>
                                                                <option value="3,000,000">$3,000,000</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Characteristic'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Characteristic Values</label>
                                                            <div style="max-height: 200px; overflow-y: auto;">
                                                                <div class="col-xs-12" ng-repeat="value in CharacteristicValues(condition.CharacteristicId)">
                                                                    <label>
                                                                        <input type="checkbox" checklist-model="condition.CharacteristicValues" checklist-value="value.Id" ng-blur="updateExclusion(condition)"> {{value.Name}}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Type</label>
                                                            <select class="form-control" ng-model="condition.Condition" ng-change="updateExclusion(condition)">
                                                                <option value="Contains">Contains</option>
                                                                <option value="Exposure">Exposure</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'State' || (condition.ConditionName ==  'ClassCode' && condition.Condition != 'Exposure')
                               || condition.ConditionName == 'Zones' || condition.ConditionName == 'Apps' || condition.ConditionName == 'Origin'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateExclusion(condition)">
                                                                <option value="0">Contains</option>
                                                                <option value="1">Excludes</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Apps'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Apps</label><br />
                                                            <input class="form-control" type="text" ng-model="appSearchTerm" placeholder="Search" style="margin-bottom: 3px;" ng-init="appSearchTerm = ''">
                                                            <ul class="check-listbox">
                                                                <li ng-repeat="app in Apps | filter : {'Name' : appSearchTerm}">
                                                                    <div class="checkbox">
                                                                        <label>
                                                                            <input type="checkbox" checklist-model="condition.Apps" checklist-value="app.Id" ng-blur="updateExclusion(condition)">
                                                                            {{app.Name}}
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'Origin'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Value</label>
                                                            <select class="form-control" ng-model="condition.ConditionValue" ng-change="updateExclusion(condition)">
                                                                <option value="Insurance Hero">Insurance Hero</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-6" ng-show="condition.ConditionName == 'Zones'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <div class="col-sm-6">
                                                                <button ng-if="ActiveConditionZoneTree == condition" class="btn btn-default btn-block btn-success" ng-click="addSelectedConditionZone(condition); updateExclusion(condition)">Add Selected</button>
                                                                <div>
                                                                    <div ng-if="ActiveConditionZoneTree != condition"><button class="btn btn-default btn-block" ng-click="selectConditionZoneTree(condition)">Click to See Zones</button></div>
                                                                    <div ng-if="ActiveConditionZoneTree == condition" tree="condition.treeInstance" js-tree="ZoneConditionConfig" ng-model="ConditionZoneTree" style="height: 150px; border: 1px solid #000; overflow: auto"></div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <button class="btn btn-default pull-right btn-success" ng-click="deleteSelectedConditionZones(condition); updateExclusion(condition)">Delete Selected</button>
                                                                <select id="zonesList" class="form-control" ng-multiple="true" multiple style="height: 150px;" ng-options="zone.Name for zone in condition.AssignedZones" ng-model="condition.SelectedZones"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'State'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>States</label><br />
                                                            <input class="form-control" type="text" ng-model="searchTermExclusion" placeholder="Search" style="margin-bottom: 3px;" ng-init="searchTermExclusion = ''">
                                                            <ul class="check-listbox">
                                                                <li ng-repeat="state in States | filter : {'Name' : searchTermExclusion}">
                                                                    <div class="checkbox">
                                                                        <label>
                                                                            <input type="checkbox" checklist-model="condition.States" checklist-value="state.Code" ng-blur="updateExclusion(condition)">
                                                                            {{state.Name}}
                                                                        </label>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-3" ng-show="condition.ConditionName == 'ClassCode'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Class Codes</label>
                                                            <textarea class="form-control" ng-model="condition.ClassCodes" ng-blur="updateExclusion(condition)"></textarea>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Question ID</label>
                                                            <input class="form-control" ng-model="condition.Supplementary" mask data-mask="#" ng-blur="updatupdateExclusioneCondition(condition)" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Operator</label>
                                                            <select class="form-control" ng-model="condition.Operator" ng-change="updateExclusion(condition)">
                                                                <option value="0">=</option>
                                                                <option value="1"><></option>
                                                                <option value="2"><</option>
                                                                <option value="3">></option>
                                                                <option value="4"><=</option>
                                                                <option value="5">>=</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" ng-show="condition.ConditionName == 'ClassCode' && condition.Condition == 'Exposure'">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <label>Exposure</label>
                                                            <input class="form-control" ng-model="condition.ConditionValue" mask data-mask="#" ng-blur="updateExclusion(condition)" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-1 pull-right">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <button class="btn btn-danger" ng-click="deleteExclusion(condition, group)" ng-mouseenter="hoverParent($event,true)" ng-mouseleave="hoverParent($event,false)" ng-if="group[0] != condition" style="margin-top:25px">Delete</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <button class="btn btn-warning" ng-click="newExclusion(group)">New Condition</button>
                                                            <button class="btn btn-danger pull-right" ng-click="deleteExclusionGroup(group, RateSheet.Exclusions)">Delete Group</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </accordion-group>
                                    </accordion>
                                </div>
                            </div>
                        </tab>
                    </tabset>



                    <div class="row">
                        <div class="col-sm-12">
                            <div class="pull-right" style="margin-top: 10px">
                                <button class="btn btn-danger btn-sm" ng-click="cancelRateSheet(RateSheet)">
                                    <i class="fa fa-ban margin-right"></i>Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
<!-- /.content -->


<script type="text/ng-template" id="tableModelContent.html">
    <div class="modal-header">
        <h4 class="modal-title">Table</h4>
    </div>
    <div class="modal-body" id="form-body">
        <div class="row" style="margin-bottom: 10px">
            <div class="scrollable col-xs-12">
                <div class="form-group row">
                    <div class="col-md-6">
                        <input class="form-control input-sm" ng-model="table.Name" placeholder="Enter Name" />
                    </div>
                </div>
                <tabset>
                    <tab heading="Horizontal Characteristic">
                        <div class="form-group row">
                            <label class="col-md-3 control-label" style="text-align:left">Rate By (Horizontal):</label>
                            <div class="col-md-6">
                                <select class="form-control input-sm" ng-options="c.Id as c.Name for c in HorizontalCharacteristics" ng-model="table.HorizontalCharacteristicId" ng-change="UpdateHorizontalCharacteristics()"></select>
                            </div>
                            <div class="col-md-3" ng-show="getCharacteristic(table.HorizontalCharacteristicId).Type == 1">
                                <label class="control-label" style="text-align:left">
                                    <input type="checkbox" ng-model="table.IsHorizontalMinMax"> Min Max Relationship
                                </label>
                            </div>
                        </div>
                        <div class="row" ng-show="HorizontalCharacteristicValues.length > 0">
                            <div class="col-xs-6">
                                <input type="text" class="form-control" ng-model="hSearch" placeholder="Search" style="margin-bottom:10px;" />
                            </div>
                            <div class="col-xs-12">
                                <button class="btn btn-link" ng-click="checkAllHorizontal()"> Check All</button>
                                <hr />
                            </div>
                            <div style="max-height:400px;overflow-y:auto;float:left;">
                                <div class="col-xs-12" ng-repeat="value in HorizontalCharacteristicValues | filter: hSearch">
                                    <label>
                                        <input type="checkbox" checklist-model="table.HorizontalHeaders" checklist-value="value.Id"> {{value.Name}}
                                    </label>
                                </div>
                            </div>
                        </div>
                    </tab>
                    <tab heading="Vertical Characteristic">
                        <div class="form-group row">
                            <label class="col-md-3 control-label" style="text-align:left">Rate By (Vertical):</label>
                            <div class="col-md-6">
                                <select class="form-control input-sm" ng-options="c.Id as c.Name for c in VerticalCharacteristics" ng-model="table.VerticalCharacteristicId" ng-change="UpdateVerticalCharacteristics()"></select>
                            </div>
                            <div class="col-md-3" ng-show="getCharacteristic(table.VerticalCharacteristicId).Type == 1">
                                <label class="control-label" style="text-align:left">
                                    <input type="checkbox" ng-model="table.IsVerticalMinMax"> Min Max Relationship
                                </label>
                            </div>
                        </div>
                        <div class="row" ng-show="VerticalCharacteristicValues.length > 0">
                            <div class="col-xs-6">
                                <input type="text" class="form-control" ng-model="vSearch" placeholder="Search" style="margin-bottom:10px;" />
                            </div>

                            <div class="col-xs-12">
                                <button class="btn btn-link" ng-click="checkAllVertical()"> Check All</button>
                                <hr />
                            </div>
                            <div style="max-height:400px;overflow-y:auto;float:left;">
                                <div class="col-xs-12" ng-repeat="value in VerticalCharacteristicValues | filter: vSearch">
                                    <label>
                                        <input type="checkbox" checklist-model="table.VerticalHeaders" checklist-value="value.Id"> {{value.Name}}
                                    </label>
                                </div>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
        <div class="modal-push">
        </div>
    </div>
    <div class="modal-footer">
        <div>
            <button type="button" class="btn btn-default" ng-click="close()">Close</button>
            <button type="button" class="btn btn-primary" ng-click="save()">Save</button>
        </div>
    </div>
</script>



<script type="text/ng-template" id="newSheetModelContent.html">
    <div class="modal-header">
        <h4 class="modal-title">New Rate Sheet</h4>
    </div>
    <div class="modal-body" id="form-body">
        <div class="row" style="margin-bottom: 10px">
            <div class="scrollable col-xs-12">
                <div class="form-group location-addr-field">
                    <label class="col-md-4 control-label"><strong>Name</strong></label>
                    <div class="col-md-8">
                        <input class="form-control input-sm" ng-model="name" />
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-push">
        </div>
    </div>
    <div class="modal-footer">
        <div>
            <button type="button" class="btn btn-default" ng-click="close()">Close</button>
            <button type="button" class="btn btn-primary" ng-click="save()">Ok</button>
        </div>
    </div>
</script>


<script type="text/ng-template" id="copyToRateSheetModel.html">
    <div class="modal-header">
        <h4 class="modal-title">Copy To Rate Sheet</h4>
    </div>
    <div class="modal-body" id="form-body">
        <div class="row" style="margin-bottom: 10px">
            <div class="scrollable col-xs-12">
                <div class="form-group">
                    <label class="col-md-4 control-label"><strong>Contract</strong></label>
                    <div class="col-md-8">
                        <div class="form-group select-box">
                            <ui-select ng-model="copyTo.Contract"
                                       append-to-body="true"
                                       theme="bootstrap"
                                       reset-search-input="false">
                                <ui-select-match placeholder="Select a Contract">{{$select.selected.Name}}</ui-select-match>
                                <ui-select-choices repeat="contract in Contracts | orderBy: 'Name' | filter: $select.search">
                                    <div ng-bind-html="contract.Name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-4 control-label"><strong>Rate Sheet</strong></label>
                    <div class="col-md-8">
                        <div class="form-group select-box">
                            <ui-select ng-model="copyTo.RateSheet"
                                       append-to-body="true"
                                       theme="bootstrap"
                                       reset-search-input="false">
                                <ui-select-match placeholder="Select a Rate Sheet to Copy To">{{$select.selected.Name}}</ui-select-match>
                                <ui-select-choices repeat="rateSheet in copyTo.Contract.RateSheets | orderBy: 'Name' | filter: $select.search">
                                    <div ng-bind-html="rateSheet.Name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-push">
        </div>
    </div>
    <div class="modal-footer">
        <div>
            <button type="button" class="btn btn-default" ng-click="close()">Cancel</button>
            <button type="button" class="btn btn-primary" ng-click="copy()" ng-disabled="copyTo.RateSheet == null || copyTo.RateSheet.Id == null">Copy</button>
        </div>
    </div>
</script>