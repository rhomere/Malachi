<div class="row">
    <div class="col-md-6">
        <form name="form" xt-form class="form-horizontal" role="form" id="submission-form" novalidate tooltip-trigger="hover manual">
            <div class="alert alert-danger" role="alert" ng-show="ErrorMessage.length > 0">{{ErrorMessage}}</div>
            <div class="alert alert-warning" role="alert" ng-show="WarningMessage.length > 0">{{ErrorMessage}}</div>

            <!-- Insured Name -->
            <div class="form-group">
                <label class="col-sm-4 control-label">Named Insured</label>
                <div class="col-sm-8">
                    <input class="form-control input-sm"
                           ng-change="requireSave()"
                           ng-model="parent.Policy.Insured.Name"
                           ng-disabled="!parent.canModify()"
                           placeholder="Required"
                           required />
                </div>
            </div>

            <!-- DBA -->
            <div class="form-group">
                <label class="col-sm-4 control-label">Alternate/DBA</label>
                <div class="col-sm-8">
                    <input class="form-control input-sm"
                           ng-model="parent.Policy.Insured.DBA"
                           ng-change="requireSave()"
                           ng-disabled="!parent.canModify()" />
                </div>
            </div>

            <!-- Business Description -->
            <div class="form-group">
                <label class="col-sm-4 control-label">Business Description</label>
                <div class="col-sm-8">
                    <input class="form-control input-sm" maxlength="120"
                           ng-model="parent.Policy.BusinessDescription"
                           ng-change="requireSave()"
                           ng-disabled="!parent.canModify()" />
                </div>
            </div>

            <!-- Home State -->
            <div class="form-group">
                <label class="col-sm-4 control-label">Home State</label>
                <div class="col-sm-8">
                    <ui-select ng-model="parent.Policy.HomeStateCode"
                               theme="bootstrap"
                               on-select="requireSave()"
                               ng-disabled="!parent.canModify()"
                               reset-search-input="false"
                               ng-required="true">
                        <ui-select-match placeholder="Select Home State">{{$select.selected.Name}}</ui-select-match>
                        <ui-select-choices repeat="state.Code as state in States | statesFilter : $select.search : searchByBeginsWith">
                            <div ng-bind-html="state.Name | highlight: $select.search">
                            </div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <!-- Policy Term -->
            <div class="form-group" ng-show="parent.Policy.Endorsement == null">
                <label class="col-sm-4 control-label">Policy Term</label>
                <div class="col-sm-8">
                    <ui-select ng-model="parent.Policy.PolicyTerm"
                               theme="bootstrap"
                               ng-disabled="!parent.canModify() || parent.Policy.Endorsement != null"
                               reset-search-input="false"
                               on-select="effectiveDateChanged()">
                        <ui-select-match placeholder="Select a Policy Term">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="value.id as value in PolicyTermOptions | filter: $select.search">
                            <div ng-bind-html="value.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <!-- Effective Date -->
            <div class="form-group" ng-if="parent.Policy.Endorsement == null">
                <label for="effectiveDate" class="col-sm-4 control-label">Effective</label>
                <div class="col-sm-8">
                    <input type="text"
                           class="form-control "
                           id="effectiveDate"
                           ng-disabled="!parent.canModify() || parent.Policy.Endorsement != null"
                           ng-model="parent.Policy.Effective"
                           jqdatepicker
                           ng-if="lateBinder"
                           datechange="effectiveDateChanged()"
                           ng-blur="effectiveDateChanged()"
                           ng-change="requireSave()" />
                    
                    <input type="text" class="form-control"
                           id="effectiveDate"
                           ng-disabled="!parent.canModify() || parent.Policy.Endorsement != null"
                           ng-model="parent.Policy.Effective"
                           jqdatepickerterm
                           ng-if="!lateBinder"
                           datechange="effectiveDateChanged()"
                           ng-blur="effectiveDateChanged()"
                           ng-change="requireSave()" />
                </div>
            </div>

            <!-- Expiration Date -->
            <div class="form-group" ng-if="parent.Policy.Endorsement == null">
                <label for="expirationDate" class="col-sm-4 control-label">Expiration</label>
                <div class="col-sm-8">
                    <input type="text"
                           class="form-control "
                           id="expirationDate"
                           ng-disabled="!parent.canModify() || parent.Policy.PolicyTerm != 0 || parent.Policy.Endorsement != null"
                           ng-model="parent.Policy.Expiration"
                           jqdatepickerendorsement
                           ng-if="parent.Policy.PolicyTerm != 0"
                           ng-max-date="parent.Policy.Effective"
                           ng-change="requireSave()" />

                    <input type="text"
                           class="form-control "
                           id="expirationDate"
                           ng-disabled="!parent.canModify() || parent.Policy.Endorsement != null"
                           ng-model="parent.Policy.Expiration"
                           jqdatepicker
                           ng-if="parent.Policy.PolicyTerm == 0"
                           ng-max-date="parent.Policy.Effective"
                           ng-change="requireSave()"/>
                </div>
            </div>

            <!-- Form of Business -->
            <div class="form-group">
                <label class="col-sm-4 control-label">Form of Business</label>
                <div class="col-sm-8">
                    <ui-select ng-model="parent.Policy.FormOfBussiness"
                               theme="bootstrap"
                               on-select="requireSave()"
                               ng-disabled="!parent.canModify()"
                               reset-search-input="false">
                        <ui-select-match placeholder="Select a Form of Business">{{$select.selected}}</ui-select-match>
                        <ui-select-choices repeat="value in FormOfBusiness | filter: $select.search: searchByBeginsWith">
                            <div ng-bind-html="value | highlight: $select.search">
                            </div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <!-- Mailing Address -->
            <div class="form-group">
                <label for="mailing-address" class="col-sm-4 control-label">Mailing Address</label>
                <div class="col-sm-6">
                    <label style="color: #0096db; margin-right:5px">Search Address</label>
                    <label>Manually Enter P.O. Boxes</label>
                    <input id="mailing-address"
                           ng-autocomplete
                           class="form-control input-sm"
                           ng-disabled="!parent.canModify()"
                           ng-model="parent.Policy.Insured.MailingAddress.ShortAddress"
                           details="details"
                           ng-change="requireSave()" />
                </div>

                <div class="col-sm-2" style="padding-top: 25px; padding-left: 0px;">
                    <input id="mailing-address2" class="form-control input-sm" ng-disabled="!parent.canModify()" ng-model="parent.Policy.Insured.MailingAddress.StreetAddress2" placeholder="Suite #" ng-change="requireSave()" />
                </div>

                <div ng-disabled="!parent.canModify()" class="col-sm-offset-4 col-sm-8" style="margin-top: 10px">
                    <label style="color:#337ab7"><a ng-click="toggleManaulAddressEntry = !toggleManaulAddressEntry">Manually Enter Address</a></label>
                    <input ng-show="toggleManaulAddressEntry" class="form-control input-sm" ng-disabled="!parent.canModify()" ng-model="parent.Policy.Insured.MailingAddress.StreetAddress1" placeholder="Address 1" ng-change="requireSave()" />
                </div>

                <div class="col-sm-offset-4 col-sm-8" style="margin-top: 10px" ng-show="toggleManaulAddressEntry">
                    <input class="form-control input-sm" ng-disabled="!parent.canModify()" ng-model="parent.Policy.Insured.MailingAddress.StreetAddress2" placeholder="Address 2" ng-change="requireSave()" />
                </div>

                <div class="col-sm-offset-4 col-sm-8" style="margin-top: 10px" ng-show="toggleManaulAddressEntry">
                    <input class="form-control input-sm" ng-disabled="!parent.canModify()" ng-model="parent.Policy.Insured.MailingAddress.Zip" ng-blur="getStateByZip()" placeholder="Zip" ng-change="requireSave()" />
                </div>

                <div class="col-sm-offset-4 col-sm-8" style="margin-top: 10px" ng-show="toggleManaulAddressEntry">
                    <input class="form-control input-sm" ng-disabled="!parent.canModify()" ng-model="parent.Policy.Insured.MailingAddress.City" placeholder="City" ng-change="requireSave()" />
                </div>

                <div class="col-sm-offset-4 col-sm-8" style="margin-top: 10px" ng-show="toggleManaulAddressEntry">
                    <input class="form-control input-sm" ng-model="parent.Policy.Insured.MailingAddress.State" ng-disabled="true" placeholder="State" ng-change="requireSave()" />
                </div>
            </div>
        </form>

        <button type="submit" ng-hide="parent.Policy.Issued || parent.isAwaitingElanyApproval()" ng-if="parent.PolicyId == null" class="btn yellow-casablanca" ng-click="createSubmission()">Save &amp; Next</button>
        <button type="submit" ng-hide="parent.Policy.Issued || parent.isAwaitingElanyApproval()" ng-if="parent.PolicyId != null" class="btn yellow-casablanca" ng-click="saveChanges()">Save &amp; Next</button>
    </div>

    <div class="col-md-6">
        <div class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-5 control-label">Account Executive<span style="color: red;"> *</span></label>
                <div class="col-sm-7">
                    <ui-select ng-model="parent.Policy.UnderwriterId"
                               append-to-body="true"
                               theme="bootstrap"
                               ng-disabled="!parent.canModify()"
                               ng-change="accountExecSelected()"
                               reset-search-input="false">
                        <ui-select-match placeholder="Select an Account Exec">{{$select.selected.Name}}</ui-select-match>
                        <ui-select-choices repeat="value.Id as value in AccountExecutives | filter: $select.search: searchByBeginsWith">
                            <div ng-bind-html="value.Name | highlight: $select.search">
                            </div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-5 control-label">Office <span style="color: red;"> *</span></label>
                <div class="col-sm-7">
                    <ui-select ng-model="parent.Policy.OfficeId"
                               append-to-body="true"
                               theme="bootstrap"
                               ng-change="requireSave()"
                               ng-disabled="!parent.canModify()"
                               reset-search-input="false">
                        <ui-select-match placeholder="Select an office">{{$select.selected.Name}}</ui-select-match>
                        <ui-select-choices repeat="value.Id as value in Offices | filter: $select.search: searchByBeginsWith">
                            <div ng-bind-html="value.Name | highlight: $select.search">
                            </div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </div>

        <div class="alert alert-danger" ng-show="ErrorList.length > 0">
            <h4>Oops...</h4>
            <ul>
                <li ng-repeat="error in ErrorList">
                    {{error}}
                </li>
            </ul>
        </div>
    </div>
</div>

<div>
    <script type="text/ng-template" id="test_Commercial_Lines_submissionClearanceModelContent.html">
        <div class="modal-header">
            <h4 class="modal-title">
                Submission Clearance
                <button data-select2-open="single-append-text" ng-click="expandModal()" style="float: right; background-color: rgba(0, 0, 0, 0); border: none;"></button>
            </h4>
        </div>
        <div class="modal-body" id="form-body">
            <div class="row" style="margin-bottom: 10px">

                <div class="col-sm-12" style="margin-bottom:20px">
                    <div class="form-group">
                        <label class="col-sm-6" style="display: inline-block; margin-top: 8px;"><strong>Search by Named Insured or DBA</strong></label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" style="width: 100%" ng-keyup="keyPress($event.keyCode)" placeholder="Search for..." ng-model="searchTerm">
                                <span class="input-group-btn">
                                    <!--<button class="btn btn-default" type="button" ng-click="getSubmissions()">Search</button>-->
                                    <button class="btn yellow-casablanca" type="button" ng-click="getSubmissions()">Search</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="tableHolder" style="padding: 12px; overflow-y: scroll; max-height: 500px; max-width: 880px; margin-bottom: 8px;" ng-if="submissions.length > 0">
                    <div ng-repeat="submission in submissions" ng-class="{'info' : selectedSubmission == submission}" ng-click="submissionClicked(submission)" style="cursor:pointer">
                        <div class="row subSelected" style="height: auto; padding: 20px; border: 1px solid #ddd; margin: 15px; border-radius: 5px !important;" ng-class="{ 'submissionSelected' : submission.isSelected  }">
                            <div class="row">
                                <div class="col-md-2" style="color: #0096db; width: 20%"><strong tooltip-placement="top" tooltip="Aim Submission Number">{{submission.Number}}</strong></div>
                                <div class="col-md-8" style="font-size: 1.08em; width: 60%; font-weight: bold;" tooltip-placement="left" tooltip="Insured Name">{{submission.Name | limitTo : 60}}</div>
                                <div class="col-md-2" style="font-size: 1.08em; width: 20%" tooltip-placement="top" tooltip="Effective Date">Eff: {{submission.Effective}}</div>
                            </div>
                            <div style="padding-top: 8px;" class="row" ng-if="submission.DBA">
                                <div class="col-md-2" style="font-size: 1.08em; width: 20%" tooltip-placement="top" tooltip="Coverage: {{submission.Product}}">{{CheckProduct(submission.Product)}}</div><!--AbbrTerm(submission.Product)-->
                                <div class="col-md-6" style="width: 60%" tooltip-placement="left" tooltip="DBA"><span>{{submission.DBA | limitTo : 90}}</span></div>
                                <div class="col-md-2" style="width: 20%"><span ng-if="submission.AccountExec" tooltip-placement="right" tooltip="Account Executive"><i style="margin-right: 10px;" class="fa fa-user" aria-hidden="true"></i>{{submission.AccountExec | limitTo : 13}}</span></div>
                            </div>
                            <div style="padding-top: 8px;" class="row">
                                <div class="col-md-2" style="width: 20%" ng-if="submission.DBA">&nbsp;</div>
                                <div class="col-md-2" style="font-size: 1.08em; width: 20%" ng-if="!submission.DBA" tooltip-placement="top" tooltip="Coverage: {{submission.Product}}">{{CheckProduct(submission.Product)}}</div><!--AbbrTerm(submission.Product)-->
                                <div class="col-md-8" style="font-size: 1.08em; width: 60%"><span tooltip-placement="bottom" tooltip-html-unsafe="Physical Address"><i style="margin-right: 10px;" class="glyphicon glyphicon-map-marker" aria-hidden="true"></i>{{CheckPhysicalAddress(submission)}}</span></div>
                                <div class="col-md-2" style="width: 20%" ng-if="!submission.DBA"><span ng-if="submission.AccountExec" tooltip-placement="right" tooltip="Account Executive"><i style="margin-right: 10px;" class="fa fa-user" aria-hidden="true"></i>{{submission.AccountExec | limitTo : 13}}</span></div>
                                <div class="col-md-2" style="width: 20%" ng-if="submission.DBA">Status: {{CheckStatus(submission.Status)}}</div>
                            </div>
                            <div style="padding-top: 8px;" class="row">
                                <div class="col-md-2" style="width: 20%"></div>
                                <div class="col-md-8" style="width: 60%"><span tooltip-placement="bottom" tooltip-html-unsafe="Mailing Address"><i style="margin-right: 10px;" class="fa fa-envelope-o" aria-hidden="true"></i>{{CheckMailingAddress(submission)}}</span></div>
                                <div class="col-md-2" style="width: 20%" ng-if="!submission.DBA">Status: {{CheckStatus(submission.Status)}}</div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="alert alert-danger" ng-show="ErrorList.length > 0" style="margin: 10px;">
                            <h4>Oops...</h4>
                            <ul>
                                <li ng-repeat="error in ErrorList">
                                    {{error}}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="modal-push">
                </div>
            </div>
            <div class="modal-footer">
                <div>
                    <button type="button" class="btn btn-default" style="float:left" ng-click="goBack()">Back</button>
                    <!--<button type="button" class="btn btn-default" ng-click="newSubmit()" ng-disabled="selectedSubmission == null">New Submit</button>
    <button type="button" class="btn btn-default" ng-click="newInsured()">New Insured</button>-->
                    <button type="button" class="btn yellow-casablanca" ng-click="newSubmit()" ng-disabled="selectedSubmission == null">New Submit</button>
                    <button type="button" class="btn yellow-casablanca" ng-click="newInsured()">New Insured</button>
                </div>
            </div>
        </div>
    </script>
</div>
